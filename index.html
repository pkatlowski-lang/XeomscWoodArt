<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ANTI-CACHE META TAGS -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>Xeomsc FusionArt - Grawerowanie Laserowe i Drewno | Premium Art</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome Pro (Free CDN) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Poppins:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Konfiguracja Tailwind -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        wood: {
                            50: '#fbf7f1',
                            100: '#f5ebd6',
                            200: '#ebd5ad',
                            300: '#dec68b', // gold-ish
                            400: '#d97706',
                            500: '#b45309',
                            600: '#92400e',
                            700: '#78350f',
                            800: '#55280c', // dark wood
                            900: '#381a06', // very dark wood
                        },
                        stone: {
                            850: '#1f1c1a',
                            950: '#0c0a09',
                        }
                    },
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                        serif: ['Cinzel', 'serif'],
                    },
                    backgroundImage: {
                        'wood-pattern': "url('https://www.transparenttextures.com/patterns/wood-pattern.png')",
                        'noise': "url('https://www.transparenttextures.com/patterns/stardust.png')",
                    },
                    boxShadow: {
                        'neon': '0 0 10px rgba(217, 119, 6, 0.5), 0 0 20px rgba(217, 119, 6, 0.3)',
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- CUSTOM CSS -->
    <style>
        /* RESET & BASE */
        :root {
            --primary-color: #b45309;
            --secondary-color: #1c1917;
            --accent-color: #d97706;
            --text-light: #fafaf9;
            --text-dark: #292524;
        }

        body {
            font-family: 'Poppins', sans-serif;
            scroll-behavior: smooth;
            overflow-x: hidden;
            background-color: #fafaf9;
        }

        /* TYPOGRAPHY UTILS */
        .font-cinzel { font-family: 'Cinzel', serif; }
        
        .gradient-text {
            background: linear-gradient(135deg, #b45309 0%, #d97706 50%, #f59e0b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.1));
        }

        .text-shadow-sm { text-shadow: 1px 1px 2px rgba(0,0,0,0.3); }
        .text-shadow-lg { text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: #1c1917; }
        ::-webkit-scrollbar-thumb { background: #57534e; border-radius: 5px; border: 2px solid #1c1917; }
        ::-webkit-scrollbar-thumb:hover { background: #b45309; }

        /* UTILITIES */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .glass-dark {
            background: rgba(28, 25, 23, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* HERO & ANIMATIONS */
        .hero-pattern {
            background-image: radial-gradient(#44403c 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .hero-slide {
            position: absolute; inset: 0; opacity: 0; 
            transition: opacity 1.5s ease-in-out, transform 8s ease-out; 
            z-index: 1; transform: scale(1.1);
        }
        .hero-slide.active { opacity: 1; z-index: 10; transform: scale(1); }

        /* INTERFACE ELEMENTS */
        .btn-primary {
            background: linear-gradient(to right, #92400e, #b45309);
            color: white;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .btn-primary::before {
            content: ''; position: absolute; top: 0; left: 0; width: 0%; height: 100%;
            background: rgba(255,255,255,0.1); transition: width 0.3s; z-index: -1;
        }
        .btn-primary:hover::before { width: 100%; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px -10px rgba(180, 83, 9, 0.5); }

        .category-card {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px -5px rgba(0,0,0,0.2);
        }
        
        .selected-cat {
            border-color: #b45309;
            box-shadow: 0 0 0 4px rgba(180, 83, 9, 0.2);
        }

        /* ADMIN PANEL SPECIFIC */
        body.is-admin #admin-controls { display: flex !important; }
        body.is-admin #navbar { top: 60px; }
        
        .admin-nav-item {
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }
        .admin-nav-item:hover { background: rgba(255,255,255,0.05); color: white; }
        .admin-nav-item.active {
            border-left-color: #d97706;
            background: linear-gradient(90deg, rgba(217, 119, 6, 0.1) 0%, transparent 100%);
            color: #fbbf24;
        }

        .calc-input {
            background: #0f0e0d; border: 1px solid #292524; color: #e7e5e4;
        }
        .calc-input:focus { border-color: #d97706; ring: 1px solid #d97706; }

        /* NOTIFICATIONS */
        .toast-enter { transform: translateX(100%); opacity: 0; }
        .toast-enter-active { transform: translateX(0); opacity: 1; transition: all 0.3s ease-out; }
        .toast-exit { transform: translateX(0); opacity: 1; }
        .toast-exit-active { transform: translateX(100%); opacity: 0; transition: all 0.3s ease-in; }

        /* LOADER */
        .loader-ring {
            display: inline-block; width: 24px; height: 24px;
        }
        .loader-ring:after {
            content: " "; display: block; width: 20px; height: 20px; margin: 2px; border-radius: 50%;
            border: 2px solid #fff; border-color: #fff transparent #fff transparent;
            animation: ring 1.2s linear infinite;
        }
        @keyframes ring { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* BLOCKERS */
        video::-webkit-media-controls { display: none !important; }
        .rgx-button-wrapper { display: none !important; }
    </style>
</head>
<body class="text-stone-800 bg-stone-50 selection:bg-wood-600 selection:text-white">

    <!-- SYSTEM POWIADOMIEŃ (TOASTS) -->
    <div id="toast-container" class="fixed bottom-5 right-5 z-[10000] flex flex-col gap-3 pointer-events-none"></div>

    <!-- 1. EKRAN LOGOWANIA ADMINA -->
    <div id="login-screen" class="fixed inset-0 z-[9999] bg-stone-950/95 hidden flex items-center justify-center p-4 backdrop-blur-md">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-fade-in-up">
            <div class="h-2 bg-gradient-to-r from-wood-600 to-wood-400"></div>
            <div class="p-10 text-center">
                <div class="mx-auto w-20 h-20 bg-stone-100 rounded-full flex items-center justify-center mb-6 text-wood-600 text-3xl shadow-inner">
                    <i class="fa-solid fa-fingerprint"></i>
                </div>
                <h2 class="text-3xl font-bold font-cinzel text-stone-900 mb-2">Panel Autoryzacji</h2>
                <p class="text-stone-500 text-sm mb-8">Wprowadź poświadczenia administratora Xeomsc</p>
                
                <form onsubmit="event.preventDefault(); Auth.login();" class="space-y-5 text-left">
                    <div class="relative">
                        <i class="fa-solid fa-user absolute left-4 top-4 text-stone-400"></i>
                        <input type="text" id="login-user" class="w-full bg-stone-50 border border-stone-200 rounded-xl pl-12 pr-4 py-3 focus:ring-2 focus:ring-wood-500 outline-none transition font-medium text-sm" placeholder="Identyfikator">
                    </div>
                    <div class="relative">
                        <i class="fa-solid fa-key absolute left-4 top-4 text-stone-400"></i>
                        <input type="password" id="login-pass" class="w-full bg-stone-50 border border-stone-200 rounded-xl pl-12 pr-4 py-3 focus:ring-2 focus:ring-wood-500 outline-none transition font-medium text-sm" placeholder="Klucz dostępu">
                    </div>
                    
                    <div id="login-error" class="text-red-600 text-xs hidden text-center font-bold bg-red-50 p-3 rounded-lg border border-red-100 flex items-center justify-center gap-2">
                        <i class="fa-solid fa-circle-xmark"></i> Nieprawidłowe dane logowania.
                    </div>

                    <button type="submit" class="w-full bg-stone-900 text-white py-4 rounded-xl font-bold hover:bg-wood-600 transition shadow-lg btn-primary">
                        Zaloguj do Systemu
                    </button>
                </form>
                <button onclick="Auth.closeLogin()" class="mt-6 text-xs text-stone-400 hover:text-wood-600 underline transition">Anuluj i wróć do strony</button>
            </div>
        </div>
    </div>

    <!-- 2. PASEK ADMINA (TOPBAR) -->
    <div id="admin-bar" class="hidden bg-stone-950 text-stone-300 text-xs font-medium py-0 px-4 fixed top-0 w-full z-[150] flex justify-between items-center shadow-lg border-b border-white/10 h-[60px]">
        <div class="flex items-center gap-6">
            <div class="flex items-center gap-3 bg-white/5 px-4 py-1.5 rounded-full border border-white/5">
                <div class="relative w-2 h-2">
                    <div class="absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"></div>
                    <div class="relative w-2 h-2 bg-green-500 rounded-full"></div>
                </div>
                <span class="tracking-widest font-bold text-[10px] uppercase text-green-400">System Online</span>
            </div>
            <div class="h-6 w-px bg-white/10"></div>
            <button onclick="UI.toggleAdminPanel()" class="hover:text-white transition flex items-center gap-2 group">
                <div class="w-8 h-8 rounded-lg bg-wood-600 flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition">
                    <i class="fa-solid fa-sliders"></i>
                </div>
                <span class="font-bold">CMS Panel</span>
                <span id="msg-badge-bar" class="ml-1 bg-red-600 text-white px-1.5 rounded text-[9px] hidden">0</span>
            </button>
        </div>
        <div class="flex items-center gap-4">
            <span class="text-stone-500 hidden md:inline">Zalogowano jako: <span class="text-white">Administrator</span></span>
            <button onclick="Auth.logout()" class="bg-white/10 hover:bg-red-900/50 hover:text-red-400 text-stone-300 px-4 py-2 rounded-lg transition flex items-center gap-2">
                <i class="fa-solid fa-power-off"></i> <span class="hidden sm:inline">Wyloguj</span>
            </button>
        </div>
    </div>

    <!-- 3. NAWIGACJA GŁÓWNA -->
    <nav class="fixed w-full z-50 bg-white/90 backdrop-blur-xl shadow-sm transition-all duration-300 top-0 h-24 flex items-center border-b border-stone-200/50" id="navbar">
        <div class="max-w-7xl mx-auto px-6 w-full flex justify-between items-center">
            <!-- Logo -->
            <a href="#" onclick="UI.goHome(); window.scrollTo(0,0);" class="flex items-center gap-3 group">
                <div class="bg-gradient-to-br from-wood-500 to-wood-700 text-white w-12 h-12 rounded-xl flex items-center justify-center text-2xl shadow-lg transform group-hover:rotate-12 transition duration-300 border border-wood-400">
                    <i class="fa-solid fa-dragon"></i>
                </div>
                <div class="leading-tight">
                    <div class="text-xl font-bold font-cinzel text-stone-900 tracking-tight">XEOMSC</div>
                    <div class="text-xs text-wood-600 font-bold uppercase tracking-[0.2em]">Fusion Art</div>
                </div>
            </a>
            
            <!-- Desktop Menu -->
            <div class="hidden lg:flex space-x-1 items-center font-medium text-stone-600 text-sm">
                <a href="#home" onclick="UI.goHome()" class="px-5 py-2 rounded-full hover:bg-stone-100 hover:text-wood-600 transition">Start</a>
                <a href="#process" onclick="UI.goHome()" class="px-5 py-2 rounded-full hover:bg-stone-100 hover:text-wood-600 transition">Proces</a>
                <a href="#portfolio" onclick="UI.goHome()" class="px-5 py-2 rounded-full hover:bg-stone-100 hover:text-wood-600 transition">Kolekcje</a>
                <a href="#custom-orders" onclick="UI.goHome()" class="px-5 py-2 rounded-full hover:bg-stone-100 hover:text-wood-600 transition">Realizacje</a>
                <a href="#contact" onclick="UI.goHome()" class="ml-4 px-8 py-3 bg-stone-900 text-white rounded-full hover:bg-wood-600 transition shadow-lg hover:shadow-xl font-bold flex items-center gap-2 transform hover:-translate-y-0.5">
                    <span>Kontakt</span> <i class="fa-solid fa-arrow-right text-xs"></i>
                </a>
            </div>

            <!-- Mobile Toggle -->
            <div class="lg:hidden flex items-center">
                <button onclick="UI.toggleMobileMenu()" class="text-stone-800 w-10 h-10 flex items-center justify-center rounded-lg hover:bg-stone-100 transition">
                    <i class="fa-solid fa-bars-staggered text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="lg:hidden hidden absolute top-24 left-0 w-full bg-white border-t border-stone-100 shadow-2xl origin-top animate-fade-in-up" id="mobile-menu">
            <div class="flex flex-col p-6 space-y-3 text-stone-800 font-medium">
                <a href="#home" class="p-3 rounded-xl hover:bg-stone-50 flex items-center gap-3" onclick="UI.toggleMobileMenu()"><i class="fa-solid fa-home text-wood-500 w-6"></i> Start</a>
                <a href="#portfolio" class="p-3 rounded-xl hover:bg-stone-50 flex items-center gap-3" onclick="UI.toggleMobileMenu()"><i class="fa-solid fa-shapes text-wood-500 w-6"></i> Produkty</a>
                <a href="#custom-orders" class="p-3 rounded-xl hover:bg-stone-50 flex items-center gap-3" onclick="UI.toggleMobileMenu()"><i class="fa-solid fa-camera text-wood-500 w-6"></i> Galeria</a>
                <div class="h-px bg-stone-100 my-2"></div>
                <a href="#contact" class="p-3 rounded-xl bg-wood-50 text-wood-700 font-bold flex items-center gap-3" onclick="UI.toggleMobileMenu()"><i class="fa-solid fa-envelope w-6"></i> Napisz do nas</a>
            </div>
        </div>
    </nav>

    <!-- 4. GŁÓWNA ZAWARTOŚĆ -->
    <main id="main-content" class="pt-24 transition-all duration-300">
        
        <!-- HERO SECTION -->
        <section id="home" class="relative h-[85vh] min-h-[600px] flex items-center overflow-hidden bg-stone-900">
            <!-- Background Carousel -->
            <div class="absolute inset-0 z-0" id="hero-carousel-container">
                <div class="w-full h-full bg-stone-800 animate-pulse"></div>
            </div>
            
            <!-- Overlay & Texture -->
            <div class="absolute inset-0 bg-gradient-to-r from-stone-950 via-stone-900/80 to-transparent z-10"></div>
            <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] z-10 pointer-events-none"></div>

            <div class="max-w-7xl mx-auto px-6 relative z-20 w-full pt-10">
                <div class="w-full lg:w-2/3">
                    <div class="inline-flex items-center gap-2 py-2 px-4 rounded-full bg-white/5 border border-white/10 text-wood-300 text-xs font-bold uppercase tracking-[0.2em] mb-8 backdrop-blur-md animate-fade-in-up">
                        <i class="fa-solid fa-star text-wood-500"></i> Premium Woodworking & Laser Art
                    </div>
                    
                    <h1 class="text-5xl md:text-7xl lg:text-8xl font-bold leading-[1.1] mb-8 text-white font-cinzel text-shadow-lg animate-fade-in-up" style="animation-delay: 0.1s;">
                        Tworzymy <br>
                        <span class="gradient-text italic pr-4">Historię</span> <br>
                        w Drewnie
                    </h1>
                    
                    <p class="text-lg md:text-xl text-stone-300 mb-12 max-w-xl leading-relaxed font-light border-l-2 border-wood-600 pl-6 animate-fade-in-up" style="animation-delay: 0.2s;">
                        Łączymy tradycyjne rzemiosło z precyzją lasera. 
                        Personalizowane dekoracje, unikalne gadżety i sztuka użytkowa, 
                        która zostaje z Tobą na lata.
                    </p>
                    
                    <div class="flex flex-wrap gap-5 animate-fade-in-up" style="animation-delay: 0.3s;">
                        <a href="#portfolio" class="px-8 py-4 bg-wood-600 text-white rounded-full hover:bg-wood-500 transition shadow-neon font-bold flex items-center gap-3 group">
                            Zobacz Kolekcje <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition"></i>
                        </a>
                        <a href="#contact" class="px-8 py-4 bg-transparent border border-white/20 text-white rounded-full hover:bg-white hover:text-stone-900 transition font-bold backdrop-blur-sm">
                            Wycena Indywidualna
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Scroll Indicator -->
            <div class="absolute bottom-10 left-1/2 -translate-x-1/2 z-20 text-white/30 animate-bounce">
                <i class="fa-solid fa-chevron-down text-2xl"></i>
            </div>
        </section>

        <!-- STATYSTYKI / TRUST BAR -->
        <div class="bg-wood-600 text-white py-12 relative z-20 shadow-2xl -mt-4">
            <div class="max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-8 text-center divide-x divide-white/10">
                <div class="p-2">
                    <div class="text-4xl font-bold mb-1">500+</div>
                    <div class="text-xs uppercase tracking-widest opacity-80">Realizacji</div>
                </div>
                <div class="p-2">
                    <div class="text-4xl font-bold mb-1">100%</div>
                    <div class="text-xs uppercase tracking-widest opacity-80">Polskie Drewno</div>
                </div>
                <div class="p-2">
                    <div class="text-4xl font-bold mb-1">24h</div>
                    <div class="text-xs uppercase tracking-widest opacity-80">Szybka Wycena</div>
                </div>
                <div class="p-2">
                    <div class="text-4xl font-bold mb-1">4.9</div>
                    <div class="text-xs uppercase tracking-widest opacity-80">Średnia Ocen</div>
                </div>
            </div>
        </div>

        <!-- PROCES (NOWA SEKCJA) -->
        <section id="process" class="py-24 bg-white relative overflow-hidden">
            <div class="absolute top-0 right-0 w-1/3 h-full bg-stone-50 skew-x-12 transform translate-x-20 z-0"></div>
            <div class="max-w-7xl mx-auto px-6 relative z-10">
                <div class="text-center mb-20">
                    <span class="text-wood-600 font-bold uppercase tracking-widest text-xs">Jak działamy?</span>
                    <h2 class="text-4xl md:text-5xl font-bold text-stone-900 mt-2 font-cinzel">Proces Tworzenia</h2>
                    <div class="w-24 h-1 bg-wood-600 mx-auto mt-6"></div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                    <!-- Krok 1 -->
                    <div class="group text-center">
                        <div class="w-24 h-24 mx-auto bg-stone-100 rounded-full flex items-center justify-center text-4xl text-stone-400 group-hover:bg-wood-600 group-hover:text-white transition duration-500 mb-8 shadow-xl relative">
                            <i class="fa-solid fa-pen-ruler"></i>
                            <div class="absolute -top-2 -right-2 w-8 h-8 bg-wood-500 rounded-full flex items-center justify-center text-white text-sm font-bold border-4 border-white">1</div>
                        </div>
                        <h3 class="text-xl font-bold mb-4">Projekt & Konsultacja</h3>
                        <p class="text-stone-500 leading-relaxed">Przesyłasz pomysł lub grafikę. My przygotowujemy wizualizację i dobieramy odpowiedni gatunek drewna.</p>
                    </div>
                    <!-- Krok 2 -->
                    <div class="group text-center">
                        <div class="w-24 h-24 mx-auto bg-stone-100 rounded-full flex items-center justify-center text-4xl text-stone-400 group-hover:bg-wood-600 group-hover:text-white transition duration-500 mb-8 shadow-xl relative">
                            <i class="fa-solid fa-burst"></i>
                            <div class="absolute -top-2 -right-2 w-8 h-8 bg-wood-500 rounded-full flex items-center justify-center text-white text-sm font-bold border-4 border-white">2</div>
                        </div>
                        <h3 class="text-xl font-bold mb-4">Grawer & Cięcie</h3>
                        <p class="text-stone-500 leading-relaxed">Nasz laser CO2 z precyzją do 0.01mm wypala wzór. Dym i ogień tworzą unikalny kontrast na materiale.</p>
                    </div>
                    <!-- Krok 3 -->
                    <div class="group text-center">
                        <div class="w-24 h-24 mx-auto bg-stone-100 rounded-full flex items-center justify-center text-4xl text-stone-400 group-hover:bg-wood-600 group-hover:text-white transition duration-500 mb-8 shadow-xl relative">
                            <i class="fa-solid fa-hand-sparkles"></i>
                            <div class="absolute -top-2 -right-2 w-8 h-8 bg-wood-500 rounded-full flex items-center justify-center text-white text-sm font-bold border-4 border-white">3</div>
                        </div>
                        <h3 class="text-xl font-bold mb-4">Wykończenie Ręczne</h3>
                        <p class="text-stone-500 leading-relaxed">Szlifowanie, olejowanie i lakierowanie. Każdy produkt przechodzi rygorystyczną kontrolę jakości.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- PORTFOLIO / SKLEP -->
        <section id="portfolio" class="py-24 bg-stone-100 relative">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex flex-col md:flex-row justify-between items-end mb-12">
                    <div>
                        <span class="text-wood-600 font-bold uppercase tracking-widest text-xs">Nasza Oferta</span>
                        <h2 class="text-4xl md:text-5xl font-bold text-stone-900 mt-2 font-cinzel">Katalog Produktów</h2>
                    </div>
                    <div class="flex gap-2 mt-6 md:mt-0">
                        <button onclick="UI.scrollContainer('main-categories-grid', -1)" class="w-12 h-12 rounded-full border border-stone-300 flex items-center justify-center hover:bg-wood-600 hover:text-white hover:border-transparent transition"><i class="fa-solid fa-arrow-left"></i></button>
                        <button onclick="UI.scrollContainer('main-categories-grid', 1)" class="w-12 h-12 rounded-full border border-stone-300 flex items-center justify-center hover:bg-wood-600 hover:text-white hover:border-transparent transition"><i class="fa-solid fa-arrow-right"></i></button>
                    </div>
                </div>

                <!-- Lista Kategorii -->
                <div id="main-categories-grid" class="flex overflow-x-auto gap-8 pb-12 snap-x snap-mandatory hide-scrollbar scroll-smooth px-2">
                    <!-- Dynamic Content -->
                    <div class="min-w-[300px] h-[400px] bg-stone-200 rounded-3xl animate-pulse flex items-center justify-center text-stone-400 font-bold">Ładowanie oferty...</div>
                </div>

                <!-- Lista Podkategorii (Hidden by default) -->
                <div id="sub-categories-container" class="hidden animate-fade-in-up border-t border-stone-200 pt-16 mt-8">
                    <div class="text-center mb-12">
                        <span class="text-stone-400 font-bold uppercase tracking-widest text-xs">Wybrano Kategorię</span>
                        <h3 id="selected-cat-title" class="text-3xl font-bold text-stone-800 mt-2">...</h3>
                    </div>
                    <div id="sub-categories-grid" class="flex flex-wrap justify-center gap-6"></div>
                </div>
            </div>
        </section>

        <!-- REALIZACJE (Custom Orders) -->
        <section id="custom-orders" class="py-24 bg-stone-900 text-white overflow-hidden relative">
            <div class="absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
            
            <div class="max-w-7xl mx-auto px-6 relative z-10">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4 font-cinzel text-wood-100">Galeria Realizacji</h2>
                    <p class="text-stone-400 max-w-2xl mx-auto">Zobacz, co stworzyliśmy dla naszych klientów. Każde zdjęcie to osobna historia i unikalny projekt.</p>
                </div>

                <div class="relative group px-12">
                     <button onclick="UI.scrollContainer('custom-orders-carousel', -1)" class="absolute left-0 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/10 hover:bg-wood-600 rounded-full flex items-center justify-center transition backdrop-blur-md"><i class="fa-solid fa-chevron-left"></i></button>
                     
                     <div id="custom-orders-carousel" class="flex overflow-x-auto gap-6 pb-4 snap-x snap-mandatory hide-scrollbar"></div>
                     
                     <button onclick="UI.scrollContainer('custom-orders-carousel', 1)" class="absolute right-0 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/10 hover:bg-wood-600 rounded-full flex items-center justify-center transition backdrop-blur-md"><i class="fa-solid fa-chevron-right"></i></button>
                </div>

                <div class="text-center mt-12">
                    <button onclick="UI.openCustomOrdersGallery()" class="px-8 py-3 border border-wood-600 text-wood-500 rounded-full hover:bg-wood-600 hover:text-white transition uppercase text-xs font-bold tracking-widest">
                        Zobacz Pełny Katalog
                    </button>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section class="py-24 bg-white border-b border-stone-100">
            <div class="max-w-4xl mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-12 font-cinzel">Częste Pytania</h2>
                <div class="space-y-4">
                    <details class="group bg-stone-50 rounded-2xl overflow-hidden border border-stone-100">
                        <summary class="flex justify-between items-center p-6 cursor-pointer font-bold text-stone-800 hover:bg-stone-100 transition list-none">
                            <span>Jaki jest czas realizacji zamówienia?</span>
                            <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down"></i></span>
                        </summary>
                        <div class="p-6 pt-0 text-stone-600 leading-relaxed border-t border-stone-100/50 mt-2">
                            Standardowy czas to 3-5 dni roboczych. Przy zamówieniach personalizowanych (np. z własnym projektem) czas może się wydłużyć do 7 dni. Zawsze informujemy o terminie przed przystąpieniem do pracy.
                        </div>
                    </details>
                    <details class="group bg-stone-50 rounded-2xl overflow-hidden border border-stone-100">
                        <summary class="flex justify-between items-center p-6 cursor-pointer font-bold text-stone-800 hover:bg-stone-100 transition list-none">
                            <span>Czy grawerujecie na materiale klienta?</span>
                            <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down"></i></span>
                        </summary>
                        <div class="p-6 pt-0 text-stone-600 leading-relaxed border-t border-stone-100/50 mt-2">
                            Tak, ale wymagamy wcześniejszej weryfikacji materiału. Niektóre tworzywa mogą nie nadawać się do lasera (np. PCV). Drewno, skóra, szkło zazwyczaj nie stanowią problemu.
                        </div>
                    </details>
                    <details class="group bg-stone-50 rounded-2xl overflow-hidden border border-stone-100">
                        <summary class="flex justify-between items-center p-6 cursor-pointer font-bold text-stone-800 hover:bg-stone-100 transition list-none">
                            <span>Czy wystawiacie fakturę VAT?</span>
                            <span class="transition group-open:rotate-180"><i class="fa-solid fa-chevron-down"></i></span>
                        </summary>
                        <div class="p-6 pt-0 text-stone-600 leading-relaxed border-t border-stone-100/50 mt-2">
                            Tak, na wszystkie nasze produkty i usługi wystawiamy fakturę VAT 23%. Dane do faktury prosimy podać przy składaniu zamówienia.
                        </div>
                    </details>
                </div>
            </div>
        </section>

        <!-- KONTAKT -->
        <section id="contact" class="py-24 bg-stone-50 relative overflow-hidden">
             <!-- Decorative blobs -->
             <div class="absolute -top-40 -right-40 w-96 h-96 bg-wood-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
             <div class="absolute top-40 -left-20 w-72 h-72 bg-orange-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>

             <div class="max-w-5xl mx-auto px-6 relative z-10 text-center">
                 <span class="text-wood-600 font-bold uppercase tracking-widest text-xs">Jesteśmy do dyspozycji</span>
                 <h2 class="text-4xl md:text-5xl font-bold mb-6 font-cinzel mt-2">Rozpocznij Projekt</h2>
                 <p class="mb-16 text-stone-500 text-lg max-w-2xl mx-auto">Nie znalazłeś produktu? Chcesz zmodyfikować projekt? Napisz do nas, a przygotujemy darmową wycenę.</p>
                 
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Email Card -->
                    <div onclick="UI.openContactModal()" class="glass-panel p-10 rounded-[2.5rem] hover:border-wood-500 cursor-pointer transition group shadow-lg hover:shadow-2xl transform hover:-translate-y-2">
                        <div class="w-20 h-20 bg-gradient-to-br from-wood-500 to-wood-700 rounded-2xl shadow-lg flex items-center justify-center text-white text-3xl mb-8 mx-auto group-hover:rotate-6 transition">
                            <i class="fa-solid fa-envelope-open-text"></i>
                        </div>
                        <h3 class="font-bold text-2xl text-stone-900 mb-2">Formularz Online</h3>
                        <p class="text-stone-500 mb-6 text-sm">Preferowana forma kontaktu. Odpisujemy zazwyczaj w ciągu 2 godzin.</p>
                        <span class="text-wood-600 font-bold uppercase text-xs tracking-widest group-hover:underline">Wyślij Wiadomość &rarr;</span>
                    </div>

                    <!-- Phone Card -->
                    <div class="glass-panel p-10 rounded-[2.5rem] hover:border-stone-400 transition group shadow-lg hover:shadow-xl">
                        <div class="w-20 h-20 bg-stone-200 rounded-2xl shadow-inner flex items-center justify-center text-stone-600 text-3xl mb-8 mx-auto">
                            <i class="fa-solid fa-phone-volume"></i>
                        </div>
                        <h3 class="font-bold text-2xl text-stone-900 mb-2">Telefon</h3>
                        <p class="text-stone-500 mb-6 text-sm">Dostępny w dni robocze 9:00 - 17:00. Doradztwo techniczne.</p>
                        <span id="contact-phone-display" class="text-2xl font-mono font-bold text-stone-800">...</span>
                    </div>
                 </div>
             </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="bg-stone-950 text-stone-500 py-16 border-t border-white/5 font-light text-sm">
        <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12">
            <div class="col-span-1 md:col-span-2">
                <h2 class="text-2xl font-bold text-white mb-4 font-cinzel">XEOMSC</h2>
                <p class="max-w-sm mb-6 leading-relaxed">
                    Profesjonalna pracownia grawerska. 
                    Tworzymy z pasją, dbałością o detal i szacunkiem do materiału. 
                    Jakość, która mówi sama za siebie.
                </p>
                <div class="flex gap-4">
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 hover:bg-wood-600 flex items-center justify-center text-white transition"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 hover:bg-wood-600 flex items-center justify-center text-white transition"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 hover:bg-wood-600 flex items-center justify-center text-white transition"><i class="fa-brands fa-tiktok"></i></a>
                </div>
            </div>
            
            <div>
                <h4 class="text-white font-bold uppercase tracking-widest text-xs mb-6">Nawigacja</h4>
                <ul class="space-y-3">
                    <li><a href="#home" class="hover:text-wood-500 transition">Strona Główna</a></li>
                    <li><a href="#about" class="hover:text-wood-500 transition">O Pracowni</a></li>
                    <li><a href="#portfolio" class="hover:text-wood-500 transition">Sklep</a></li>
                    <li><a href="#contact" class="hover:text-wood-500 transition">Kontakt</a></li>
                    <li><button onclick="UI.openLogin()" class="hover:text-white mt-4 text-xs bg-white/10 px-3 py-1 rounded">Panel Admina</button></li>
                </ul>
            </div>
            
            <div>
                <h4 class="text-white font-bold uppercase tracking-widest text-xs mb-6">Informacje</h4>
                <ul class="space-y-3">
                    <li>Regulamin Sklepu</li>
                    <li>Polityka Prywatności</li>
                    <li>Dostawa i Płatności</li>
                    <li id="db-conn-status" class="text-xs pt-4 opacity-50">Status DB: Łączenie...</li>
                </ul>
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-6 mt-16 pt-8 border-t border-white/5 text-center text-xs opacity-40">
            &copy; 2024 Xeomsc FusionArt. Wszelkie prawa zastrzeżone. Design by AI System.
        </div>
    </footer>

    <!-- WIDOKI DYNAMICZNE (MODALE) -->

    <!-- 1. Szczegóły Produktu -->
    <div id="gallery-view" class="hidden fixed inset-0 z-[110] bg-white overflow-y-auto animate-fade-in-up">
        <div class="min-h-screen pt-32 pb-20 px-6 max-w-7xl mx-auto">
            <button onclick="document.getElementById('gallery-view').classList.add('hidden')" class="mb-8 flex items-center gap-3 text-stone-500 hover:text-stone-900 transition font-bold group">
                <div class="w-10 h-10 rounded-full bg-stone-100 flex items-center justify-center group-hover:bg-wood-600 group-hover:text-white transition"><i class="fa-solid fa-arrow-left"></i></div>
                Powrót do listy
            </button>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
                <!-- Lewa: Obraz -->
                <div class="space-y-6">
                    <div class="relative w-full aspect-square rounded-[2rem] overflow-hidden shadow-2xl border border-stone-100 group cursor-zoom-in bg-stone-50" onclick="UI.openLightbox(document.getElementById('main-product-img').src)">
                         <img id="main-product-img" src="" class="w-full h-full object-cover transition duration-700 group-hover:scale-105">
                         <div class="absolute bottom-4 right-4 bg-white/80 backdrop-blur px-4 py-2 rounded-full text-xs font-bold text-stone-800 pointer-events-none opacity-0 group-hover:opacity-100 transition shadow-lg">
                            <i class="fa-solid fa-magnifying-glass-plus mr-2"></i> Powiększ
                         </div>
                    </div>
                </div>

                <!-- Prawa: Info -->
                <div class="flex flex-col justify-center">
                    <div class="mb-8">
                        <span id="prod-code" class="inline-block py-1 px-3 bg-stone-100 text-stone-500 text-xs font-mono rounded-lg mb-4 border border-stone-200">Kod: ---</span>
                        <h2 id="prod-title" class="text-4xl md:text-5xl font-bold text-stone-900 mb-4 font-cinzel leading-tight">...</h2>
                        <div class="flex items-center gap-4">
                            <p id="prod-price" class="text-3xl font-bold text-wood-600">0.00 PLN</p>
                            <span class="text-xs text-stone-400 uppercase tracking-widest font-bold">Cena Brutto</span>
                        </div>
                    </div>

                    <div class="bg-stone-50 p-8 rounded-3xl border border-stone-100 mb-8">
                        <h4 class="text-xs font-bold uppercase text-stone-400 tracking-widest mb-4 flex items-center gap-2"><i class="fa-solid fa-align-left"></i> Opis Produktu</h4>
                        <p id="prod-desc" class="text-stone-700 text-lg leading-relaxed whitespace-pre-line font-light">...</p>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4">
                        <button id="ask-btn" class="flex-1 px-8 py-4 bg-wood-600 text-white rounded-2xl font-bold hover:bg-wood-700 transition shadow-neon hover:-translate-y-1 flex items-center justify-center gap-3">
                            <i class="fa-regular fa-paper-plane"></i> Zapytaj o dostępność
                        </button>
                        <button onclick="UI.copyLink()" class="px-6 py-4 bg-stone-100 text-stone-600 rounded-2xl font-bold hover:bg-stone-200 transition flex items-center justify-center gap-2" title="Kopiuj link">
                            <i class="fa-solid fa-share-nodes"></i>
                        </button>
                    </div>
                    
                    <div class="mt-8 flex items-center gap-4 text-xs text-stone-400 border-t border-stone-100 pt-6">
                        <div class="flex items-center gap-1"><i class="fa-solid fa-truck"></i> Wysyłka 24h</div>
                        <div class="flex items-center gap-1"><i class="fa-solid fa-shield-halved"></i> Gwarancja Jakości</div>
                        <div class="flex items-center gap-1"><i class="fa-solid fa-tree"></i> Eko Materiały</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. Lightbox -->
    <div id="lightbox" class="fixed inset-0 z-[5000] bg-stone-950/98 hidden flex items-center justify-center p-4 backdrop-blur-xl transition-all duration-300 opacity-0" onclick="UI.closeLightbox()">
        <button class="absolute top-6 right-6 text-white/50 hover:text-white transition z-[5010] p-4 bg-white/10 rounded-full w-12 h-12 flex items-center justify-center hover:bg-red-600">
            <i class="fa-solid fa-xmark text-xl"></i>
        </button>
        <img id="lightbox-img" src="" class="max-w-full max-h-[90vh] rounded-lg shadow-2xl object-contain scale-95 transition-transform duration-300" onclick="event.stopPropagation()">
    </div>

    <!-- 3. Formularz Kontaktowy Modal -->
    <div id="contact-modal" class="fixed inset-0 z-[3000] bg-stone-900/60 backdrop-blur-sm hidden flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-xl rounded-3xl shadow-2xl overflow-hidden animate-fade-in-up flex flex-col max-h-[90vh]">
            <div class="bg-stone-900 p-8 text-white flex justify-between items-center shrink-0 relative overflow-hidden">
                <div class="absolute inset-0 bg-wood-600/20"></div>
                <div class="relative z-10">
                    <h3 class="text-2xl font-bold font-cinzel">Napisz do nas</h3>
                    <p class="text-stone-400 text-xs mt-1">Odpowiemy najszybciej jak to możliwe.</p>
                </div>
                <button onclick="UI.closeContactModal()" class="relative z-10 bg-white/10 hover:bg-white/20 p-2 rounded-full w-10 h-10 transition"><i class="fa-solid fa-xmark"></i></button>
            </div>
            
            <div class="p-8 space-y-5 overflow-y-auto custom-scrollbar">
                <div class="grid grid-cols-2 gap-5">
                    <div>
                        <label class="block text-[10px] font-bold text-stone-400 uppercase mb-1 ml-1 tracking-widest">Imię</label>
                        <input type="text" id="contact-name" class="w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-wood-500 outline-none transition font-bold text-stone-700">
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-stone-400 uppercase mb-1 ml-1 tracking-widest">Email</label>
                        <input type="email" id="contact-email" class="w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-wood-500 outline-none transition font-bold text-stone-700">
                    </div>
                </div>

                <div id="product-context-info" class="hidden bg-wood-50 border border-wood-100 p-4 rounded-xl flex items-center gap-3 text-wood-800">
                    <div class="w-10 h-10 bg-wood-200 rounded-lg flex items-center justify-center text-wood-700"><i class="fa-solid fa-tag"></i></div>
                    <div class="flex-1">
                        <div class="text-[10px] uppercase font-bold opacity-60">Pytanie o produkt</div>
                        <div id="contact-product-code" class="font-bold">...</div>
                    </div>
                    <button onclick="UI.clearContactContext()" class="text-wood-400 hover:text-red-500"><i class="fa-solid fa-times"></i></button>
                </div>

                <div>
                    <label class="block text-[10px] font-bold text-stone-400 uppercase mb-1 ml-1 tracking-widest">Wiadomość</label>
                    <textarea id="contact-msg" class="w-full bg-stone-50 border border-stone-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-wood-500 outline-none transition h-32 resize-none font-medium text-stone-600" placeholder="Opisz swój pomysł..."></textarea>
                </div>

                <div>
                    <label class="block text-[10px] font-bold text-wood-600 uppercase mb-2 ml-1 tracking-widest">Załącz zdjęcie (opcjonalne)</label>
                    <div class="relative group">
                        <input type="file" id="contact-file" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10">
                        <div class="border-2 border-dashed border-stone-200 rounded-xl p-4 text-center group-hover:border-wood-400 transition bg-stone-50">
                            <span class="text-xs text-stone-400 group-hover:text-wood-600 font-bold"><i class="fa-solid fa-cloud-arrow-up mr-2"></i> Kliknij, aby dodać plik</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="p-6 border-t border-stone-100 bg-stone-50 shrink-0">
                <button onclick="DataManager.sendMessage()" id="send-btn" class="w-full bg-wood-600 text-white py-4 rounded-xl font-bold hover:bg-wood-700 transition shadow-lg flex items-center justify-center gap-2">
                    <i class="fa-solid fa-paper-plane"></i> Wyślij Wiadomość
                </button>
            </div>
        </div>
    </div>

    <!-- 4. PANEL ADMINISTRATORA (PEŁNY EKRAN) -->
    <div id="admin-panel" class="fixed inset-0 z-[2000] bg-stone-950 hidden flex overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-72 bg-black border-r border-white/10 flex flex-col shrink-0">
            <div class="p-8 border-b border-white/10">
                <h2 class="text-xl font-bold text-white font-cinzel tracking-wider">CMS <span class="text-wood-500">ADMIN</span></h2>
                <p class="text-[10px] text-stone-500 uppercase mt-1">Xeomsc System v2.0</p>
            </div>
            
            <nav class="flex-1 overflow-y-auto p-4 space-y-1">
                <p class="px-4 py-2 text-[10px] font-bold text-stone-600 uppercase tracking-widest">Główne</p>
                <button onclick="UI.switchAdminTab('stats')" id="tab-stats" class="admin-nav-item w-full text-left px-4 py-3 rounded-lg text-stone-400 font-medium flex items-center gap-3">
                    <i class="fa-solid fa-chart-line w-5"></i> Statystyki
                </button>
                <button onclick="UI.switchAdminTab('messages')" id="tab-messages" class="admin-nav-item w-full text-left px-4 py-3 rounded-lg text-stone-400 font-medium flex items-center gap-3 relative">
                    <i class="fa-solid fa-inbox w-5"></i> Wiadomości
                    <span id="adm-msg-badge" class="absolute right-4 bg-red-600 text-white text-[10px] font-bold px-1.5 rounded hidden">0</span>
                </button>
                
                <p class="px-4 py-2 mt-6 text-[10px] font-bold text-stone-600 uppercase tracking-widest">Sklep & Treści</p>
                <button onclick="UI.switchAdminTab('hero')" id="tab-hero" class="admin-nav-item w-full text-left px-4 py-3 rounded-lg text-stone-400 font-medium flex items-center gap-3">
                    <i class="fa-solid fa-images w-5"></i> Hero Slider
                </button>
                <button onclick="UI.switchAdminTab('cats')" id="tab-cats" class="admin-nav-item w-full text-left px-4 py-3 rounded-lg text-stone-400 font-medium flex items-center gap-3">
                    <i class="fa-solid fa-layer-group w-5"></i> Kategorie
                </button>
                <button onclick="UI.switchAdminTab('products')" id="tab-products" class="admin-nav-item w-full text-left px-4 py-3 rounded-lg text-stone-400 font-medium flex items-center gap-3">
                    <i class="fa-solid fa-boxes-stacked w-5"></i> Produkty
                </button>
                <button onclick="UI.switchAdminTab('gallery')" id="tab-gallery" class="admin-nav-item w-full text-left px-4 py-3 rounded-lg text-stone-400 font-medium flex items-center gap-3">
                    <i class="fa-solid fa-camera-retro w-5"></i> Realizacje
                </button>

                <p class="px-4 py-2 mt-6 text-[10px] font-bold text-stone-600 uppercase tracking-widest">Narzędzia</p>
                <button onclick="UI.switchAdminTab('calc')" id="tab-calc" class="admin-nav-item w-full text-left px-4 py-3 rounded-lg text-stone-400 font-medium flex items-center gap-3">
                    <i class="fa-solid fa-calculator w-5"></i> Kalkulator
                </button>
                <button onclick="UI.switchAdminTab('settings')" id="tab-settings" class="admin-nav-item w-full text-left px-4 py-3 rounded-lg text-stone-400 font-medium flex items-center gap-3">
                    <i class="fa-solid fa-sliders w-5"></i> Ustawienia
                </button>
            </nav>
            
            <div class="p-4 border-t border-white/10">
                <button onclick="UI.toggleAdminPanel()" class="w-full py-3 bg-white/5 hover:bg-white/10 text-stone-400 hover:text-white rounded-lg transition font-medium text-sm flex items-center justify-center gap-2">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i> Zamknij Panel
                </button>
            </div>
        </aside>

        <!-- Main Area -->
        <main class="flex-1 bg-stone-900 text-stone-200 overflow-y-auto p-8 md:p-12 relative">
            <div id="admin-view-container" class="max-w-6xl mx-auto space-y-8 pb-20">
                <!-- Content injected via JS -->
                <div class="flex items-center justify-center h-full opacity-50"><span class="loader-ring"></span></div>
            </div>
        </main>
    </div>

    <!-- LOGIKA SYSTEMU (JS) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, addDoc, collection, deleteDoc, updateDoc, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        /** * KLASA OBSŁUGI DANYCH I FIREBASE 
         * Zarządza całą komunikacją z bazą danych.
         */
        class DataManager {
            static app = null;
            static db = null;
            static auth = null;
            static appId = 'xeomsc-fusionart-v2';
            static data = {
                categories: {},
                customOrders: [],
                heroItems: [],
                config: { email: '', phone: '', imgbbKey: '' },
                calc: { rate: 0.5, mat: 0.003, margin: 20 }
            };

            static async init() {
                const config = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
                if(!config) { console.error("Brak konfiguracji Firebase"); return; }
                
                this.app = initializeApp(config);
                this.auth = getAuth(this.app);
                this.db = getFirestore(this.app);
                this.appId = typeof __app_id !== 'undefined' ? __app_id : this.appId;

                // Auth Logic
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(this.auth, __initial_auth_token);
                } else {
                    await signInAnonymously(this.auth);
                }

                onAuthStateChanged(this.auth, (user) => {
                    if (user) {
                        document.getElementById('db-conn-status').textContent = "Status DB: Połączono";
                        document.getElementById('db-conn-status').classList.add('text-green-500');
                        this.startListeners();
                        if(sessionStorage.getItem('xeomsc_admin')) {
                            document.body.classList.add('is-admin');
                            document.getElementById('admin-bar').classList.remove('hidden');
                            this.listenForMessages();
                        }
                    }
                });
            }

            static startListeners() {
                // Main Site Config
                onSnapshot(doc(this.db, `artifacts/${this.appId}/public/data/siteConfig`, 'main'), (snap) => {
                    if(snap.exists()) {
                        this.data = { ...this.data, ...snap.data() };
                        UI.renderAll();
                    } else {
                        // Init default data if empty
                        this.seedData();
                    }
                });
            }

            static async seedData() {
                const defaults = {
                    heroItems: [{type:'image', url:'https://images.unsplash.com/photo-1622623363380-45c128919616?q=80&w=2070'}],
                    categories: {},
                    customOrders: [],
                    config: { email: 'kontakt@xeomsc.pl', phone: '+48 000 000 000', imgbbKey: '' }
                };
                await setDoc(doc(this.db, `artifacts/${this.appId}/public/data/siteConfig`, 'main'), defaults);
            }

            static async save() {
                try {
                    await setDoc(doc(this.db, `artifacts/${this.appId}/public/data/siteConfig`, 'main'), this.data);
                    NotificationSystem.success("Zapisano zmiany w chmurze!");
                } catch(e) {
                    NotificationSystem.error("Błąd zapisu: " + e.message);
                }
            }

            static async sendMessage() {
                const btn = document.getElementById('send-btn');
                const name = document.getElementById('contact-name').value;
                const email = document.getElementById('contact-email').value;
                const msg = document.getElementById('contact-msg').value;
                const code = UI.currentContactCode;
                const fileIn = document.getElementById('contact-file');

                if(!name || !email || !msg) { NotificationSystem.error("Wypełnij wymagane pola!"); return; }
                
                btn.innerHTML = '<span class="loader-ring w-4 h-4 border-2"></span> Wysyłanie...';
                
                let imgUrl = null;
                if(fileIn.files[0] && this.data.config.imgbbKey) {
                    const fd = new FormData(); fd.append("image", fileIn.files[0]);
                    try {
                        const r = await fetch(`https://api.imgbb.com/1/upload?key=${this.data.config.imgbbKey}`, {method:'POST', body:fd});
                        const j = await r.json();
                        if(j.data?.url) imgUrl = j.data.url;
                    } catch(e) { console.error(e); }
                }

                try {
                    await addDoc(collection(this.db, `artifacts/${this.appId}/public/data/messages`), {
                        name, email, message: msg, productCode: code, imageUrl: imgUrl,
                        read: false, date: new Date().toISOString()
                    });
                    NotificationSystem.success("Wiadomość wysłana pomyślnie!");
                    UI.closeContactModal();
                    // Clear form
                    document.getElementById('contact-name').value = '';
                    document.getElementById('contact-msg').value = '';
                } catch(e) {
                    NotificationSystem.error("Błąd: " + e.message);
                } finally {
                    btn.innerHTML = '<i class="fa-solid fa-paper-plane"></i> Wyślij Wiadomość';
                }
            }

            static listenForMessages() {
                const q = query(collection(this.db, `artifacts/${this.appId}/public/data/messages`), orderBy('date', 'desc'));
                onSnapshot(q, (snap) => {
                    let unread = 0;
                    const html = snap.docs.map(d => {
                        const m = d.data();
                        if(!m.read) unread++;
                        return UI.Templates.messageRow(d.id, m);
                    }).join('');
                    
                    if(document.getElementById('msg-list-body')) document.getElementById('msg-list-body').innerHTML = html || '<tr><td colspan="5" class="p-8 text-center text-stone-500">Brak wiadomości</td></tr>';
                    
                    const badges = [document.getElementById('msg-badge-bar'), document.getElementById('adm-msg-badge')];
                    badges.forEach(b => {
                        if(unread > 0) { b.textContent = unread; b.classList.remove('hidden'); }
                        else b.classList.add('hidden');
                    });
                });
            }
        }

        /**
         * KLASA UI - Zarządza widokiem i interakcjami
         */
        class UI {
            static currentContactCode = null;

            static goHome() {
                ['gallery-view', 'contact-modal'].forEach(id => document.getElementById(id).classList.add('hidden'));
                document.getElementById('mobile-menu').classList.add('hidden');
            }

            static renderAll() {
                this.renderHero();
                this.renderCategories();
                this.renderCustomOrders();
                this.updateContactInfo();
            }

            static renderHero() {
                const cont = document.getElementById('hero-carousel-container');
                if(!cont) return;
                const items = DataManager.data.heroItems || [];
                cont.innerHTML = items.map((it, i) => `
                    <div class="hero-slide ${i===0?'active':''}">
                        <img src="${it.url}" class="w-full h-full object-cover opacity-60">
                    </div>
                `).join('');
                
                // Rotation logic
                if(this.heroTimer) clearInterval(this.heroTimer);
                let cur = 0;
                const slides = document.querySelectorAll('.hero-slide');
                if(slides.length > 1) {
                    this.heroTimer = setInterval(() => {
                        slides[cur].classList.remove('active');
                        cur = (cur + 1) % slides.length;
                        slides[cur].classList.add('active');
                    }, 5000);
                }
            }

            static renderCategories() {
                const grid = document.getElementById('main-categories-grid');
                if(!grid) return;
                const cats = DataManager.data.categories || {};
                
                if(Object.keys(cats).length === 0) {
                    grid.innerHTML = '<div class="w-full text-center py-10 text-stone-400">Oferta jest przygotowywana...</div>';
                    return;
                }

                grid.innerHTML = Object.entries(cats).map(([id, c]) => `
                    <div class="category-card min-w-[280px] md:min-w-[320px] snap-center cursor-pointer group relative rounded-[2rem] overflow-hidden shadow-lg h-[400px] bg-stone-900 border border-stone-800" onclick="UI.selectCategory('${id}')">
                        <img src="${c.image}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition duration-700">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-8">
                            <h3 class="text-white font-bold text-2xl font-cinzel mb-2 transform translate-y-2 group-hover:translate-y-0 transition">${c.title}</h3>
                            <div class="w-12 h-1 bg-wood-500 rounded-full mb-4 opacity-0 group-hover:opacity-100 transition duration-500"></div>
                            <p class="text-stone-300 text-xs opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition duration-500 delay-100">Kliknij, aby zobaczyć kolekcję</p>
                        </div>
                    </div>
                `).join('');
            }

            static selectCategory(id) {
                const cat = DataManager.data.categories[id];
                if(!cat) return;
                
                document.getElementById('selected-cat-title').textContent = cat.title;
                const cont = document.getElementById('sub-categories-container');
                const grid = document.getElementById('sub-categories-grid');
                
                cont.classList.remove('hidden');
                
                if(!cat.subs || Object.keys(cat.subs).length === 0) {
                    grid.innerHTML = '<p class="text-stone-500">Brak podkategorii.</p>';
                } else {
                    grid.innerHTML = Object.entries(cat.subs).map(([sid, s]) => `
                        <div class="w-full max-w-[350px] bg-white rounded-3xl overflow-hidden shadow-md hover:shadow-xl transition border border-stone-100 group cursor-pointer" onclick="UI.openSubCategory('${id}', '${sid}')">
                            <div class="h-48 overflow-hidden relative">
                                <img src="${s.image}" class="w-full h-full object-cover group-hover:scale-105 transition duration-700">
                                <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition"></div>
                            </div>
                            <div class="p-6">
                                <h4 class="font-bold text-xl mb-2 text-stone-800 group-hover:text-wood-600 transition">${s.title}</h4>
                                <div class="flex justify-between items-center mt-4">
                                    <span class="text-xs font-bold text-stone-400 uppercase tracking-widest">${s.products ? s.products.length : 0} PRODUKTÓW</span>
                                    <span class="w-8 h-8 rounded-full bg-stone-100 flex items-center justify-center group-hover:bg-wood-600 group-hover:text-white transition"><i class="fa-solid fa-arrow-right"></i></span>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
                
                setTimeout(() => cont.scrollIntoView({behavior:'smooth', block:'start'}), 100);
            }

            static openSubCategory(cid, sid) {
                // Simplified: Just show products in a modal or list
                // For this expanded version, let's inject products below the subcategory card or open a modal?
                // Let's create a temporary product grid view within the main container for smoothness
                const cat = DataManager.data.categories[cid];
                const sub = cat.subs[sid];
                const products = sub.products || [];
                
                const grid = document.getElementById('sub-categories-grid');
                grid.innerHTML = `
                    <div class="w-full animate-fade-in-up">
                        <button onclick="UI.selectCategory('${cid}')" class="mb-6 text-sm font-bold text-stone-500 hover:text-wood-600 flex items-center gap-2"><i class="fa-solid fa-arrow-left"></i> Wróć do podkategorii</button>
                        <h3 class="text-2xl font-bold mb-6 text-stone-800 border-l-4 border-wood-600 pl-4">${cat.title} <span class="text-stone-300">/</span> ${sub.title}</h3>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
                            ${products.map((p, i) => `
                                <div class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-2xl transition border border-stone-100 group cursor-pointer" onclick="UI.openProduct('${cid}','${sid}',${i})">
                                    <div class="aspect-square overflow-hidden bg-stone-50 relative">
                                        <img src="${p.image}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500">
                                        <div class="absolute bottom-0 left-0 bg-white/90 backdrop-blur px-3 py-1 text-xs font-bold text-wood-600 rounded-tr-lg">${p.price || 'Wycena'}</div>
                                    </div>
                                    <div class="p-4">
                                        <h4 class="font-bold text-stone-900 line-clamp-1">${p.title}</h4>
                                        <p class="text-xs text-stone-400 mt-1">Kod: ${p.code || '---'}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        ${products.length === 0 ? '<p class="text-stone-400 italic">Brak produktów w tej sekcji.</p>' : ''}
                    </div>
                `;
            }

            static openProduct(cid, sid, idx) {
                const p = DataManager.data.categories[cid].subs[sid].products[idx];
                document.getElementById('prod-title').textContent = p.title;
                document.getElementById('prod-price').textContent = p.price || 'Wycena Indywidualna';
                document.getElementById('prod-desc').textContent = p.desc || 'Brak opisu.';
                document.getElementById('prod-code').textContent = p.code ? `Kod: ${p.code}` : '---';
                document.getElementById('main-product-img').src = p.image;
                
                this.currentContactCode = p.code;
                document.getElementById('ask-btn').onclick = () => this.openContactModal(p.code);
                
                document.getElementById('gallery-view').classList.remove('hidden');
            }

            static renderCustomOrders() {
                const cont = document.getElementById('custom-orders-carousel');
                if(!cont) return;
                const imgs = DataManager.data.customOrders || [];
                cont.innerHTML = imgs.map(url => `
                    <div class="min-w-[300px] h-[300px] snap-center rounded-2xl overflow-hidden cursor-pointer relative group border border-white/10" onclick="UI.openLightbox('${url}')">
                        <img src="${url}" class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition flex items-center justify-center">
                            <i class="fa-solid fa-magnifying-glass-plus text-3xl text-white"></i>
                        </div>
                    </div>
                `).join('');
            }

            static updateContactInfo() {
                const c = DataManager.data.config || {};
                const el = document.getElementById('contact-phone-display');
                if(el && c.phone) el.textContent = c.phone;
            }

            // MODALS & HELPERS
            static openContactModal(code = null) {
                this.currentContactCode = code;
                const modal = document.getElementById('contact-modal');
                const ctx = document.getElementById('product-context-info');
                
                if(code) {
                    ctx.classList.remove('hidden');
                    document.getElementById('contact-product-code').textContent = code;
                } else {
                    ctx.classList.add('hidden');
                }
                
                modal.classList.remove('hidden');
            }
            static closeContactModal() { document.getElementById('contact-modal').classList.add('hidden'); }
            static clearContactContext() { this.currentContactCode = null; document.getElementById('product-context-info').classList.add('hidden'); }
            
            static openLightbox(url) {
                const lb = document.getElementById('lightbox');
                document.getElementById('lightbox-img').src = url;
                lb.classList.remove('hidden');
                setTimeout(()=> { lb.classList.remove('opacity-0'); document.getElementById('lightbox-img').classList.remove('scale-95'); }, 10);
            }
            static closeLightbox() {
                const lb = document.getElementById('lightbox');
                lb.classList.add('opacity-0');
                document.getElementById('lightbox-img').classList.add('scale-95');
                setTimeout(()=> lb.classList.add('hidden'), 300);
            }

            static toggleMobileMenu() { document.getElementById('mobile-menu').classList.toggle('hidden'); }
            static scrollContainer(id, dir) { document.getElementById(id).scrollBy({left: dir*300, behavior:'smooth'}); }
            
            static copyLink() {
                navigator.clipboard.writeText(window.location.href);
                NotificationSystem.success("Skopiowano link do schowka!");
            }

            // ADMIN PANEL LOGIC
            static toggleAdminPanel() {
                document.getElementById('admin-panel').classList.toggle('hidden');
                if(!document.getElementById('admin-panel').classList.contains('hidden')) this.switchAdminTab('stats');
            }

            static switchAdminTab(tab) {
                // Reset Active
                document.querySelectorAll('.admin-nav-item').forEach(el => el.classList.remove('active'));
                document.getElementById(`tab-${tab}`).classList.add('active');
                
                const container = document.getElementById('admin-view-container');
                container.innerHTML = this.Templates.adminViews[tab] || '<p>W budowie...</p>';
                
                // Init Logic for specific tabs
                if(tab === 'stats') this.AdminLogic.renderStats();
                if(tab === 'hero') this.AdminLogic.renderHeroList();
                if(tab === 'cats') this.AdminLogic.renderCatList();
                if(tab === 'products') this.AdminLogic.renderProductEditor();
                if(tab === 'messages') DataManager.listenForMessages(); // Re-trigger
                if(tab === 'settings') this.AdminLogic.renderSettings();
                if(tab === 'calc') this.AdminLogic.renderCalc();
            }

            static Templates = {
                messageRow: (id, m) => `
                    <tr class="border-b border-stone-800 hover:bg-white/5 transition ${!m.read ? 'bg-wood-900/20' : ''}">
                        <td class="p-4 text-xs text-stone-500 font-mono">${new Date(m.date).toLocaleString()}</td>
                        <td class="p-4">
                            <div class="font-bold text-stone-200">${m.name}</div>
                            <div class="text-xs text-stone-500">${m.email}</div>
                        </td>
                        <td class="p-4 max-w-xs truncate text-stone-400">${m.message}</td>
                        <td class="p-4 text-right">
                            ${m.imageUrl ? `<a href="${m.imageUrl}" target="_blank" class="text-blue-400 text-xs underline">Foto</a>` : ''}
                            ${m.productCode ? `<span class="ml-2 text-wood-500 text-xs border border-wood-500/30 px-1 rounded">${m.productCode}</span>` : ''}
                        </td>
                        <td class="p-4 text-right">
                            <button onclick="Auth.markRead('${id}')" class="text-stone-500 hover:text-green-400 mx-1"><i class="fa-solid fa-check"></i></button>
                            <button onclick="Auth.delMsg('${id}')" class="text-stone-500 hover:text-red-400 mx-1"><i class="fa-solid fa-trash"></i></button>
                        </td>
                    </tr>
                `,
                adminViews: {
                    stats: `
                        <h3 class="text-3xl font-bold font-cinzel mb-8">Statystyki Systemu</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-stone-800 p-6 rounded-2xl border border-white/5">
                                <div class="text-stone-500 text-xs uppercase font-bold tracking-widest mb-2">Unikalne Wizyty</div>
                                <div class="text-4xl font-bold text-white">1,248</div>
                                <div class="text-green-500 text-xs mt-2"><i class="fa-solid fa-arrow-trend-up"></i> +12% w tym tygodniu</div>
                            </div>
                            <div class="bg-stone-800 p-6 rounded-2xl border border-white/5">
                                <div class="text-stone-500 text-xs uppercase font-bold tracking-widest mb-2">Zapytania Ofertowe</div>
                                <div class="text-4xl font-bold text-wood-500">24</div>
                                <div class="text-stone-400 text-xs mt-2">Ostatnie: 2h temu</div>
                            </div>
                            <div class="bg-stone-800 p-6 rounded-2xl border border-white/5">
                                <div class="text-stone-500 text-xs uppercase font-bold tracking-widest mb-2">Produkty w Bazie</div>
                                <div class="text-4xl font-bold text-blue-400">86</div>
                            </div>
                        </div>
                        <div class="mt-8 bg-stone-800 p-8 rounded-2xl border border-white/5">
                            <h4 class="text-xl font-bold mb-4">Logi Systemowe</h4>
                            <div class="font-mono text-xs text-stone-500 space-y-2">
                                <p>[SYSTEM] Baza danych połączona pomyślnie.</p>
                                <p>[AUTH] Administrator zalogowany z IP: 192.168.1.1</p>
                                <p>[DATA] Pobrano konfigurację strony (14ms)</p>
                            </div>
                        </div>
                    `,
                    messages: `
                         <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold">Skrzynka Odbiorcza</h3>
                            <button onclick="DataManager.listenForMessages()" class="text-xs bg-stone-800 px-3 py-2 rounded hover:bg-wood-600 transition">Odśwież</button>
                         </div>
                         <div class="bg-stone-800 rounded-xl overflow-hidden border border-white/5">
                            <table class="w-full text-left border-collapse">
                                <thead class="bg-black/20 text-stone-400 text-xs uppercase">
                                    <tr><th class="p-4">Data</th><th class="p-4">Nadawca</th><th class="p-4">Treść</th><th class="p-4 text-right">Info</th><th class="p-4 text-right">Akcje</th></tr>
                                </thead>
                                <tbody id="msg-list-body"></tbody>
                            </table>
                         </div>
                    `,
                    hero: `
                        <h3 class="text-2xl font-bold mb-6">Zarządzanie Hero Slider</h3>
                        <div class="bg-stone-800 p-6 rounded-xl mb-6">
                            <div class="flex gap-4">
                                <input id="new-hero-url" class="calc-input flex-1 px-4 py-2 rounded-lg" placeholder="URL Zdjęcia">
                                <button onclick="UI.AdminLogic.addHero()" class="bg-wood-600 px-6 py-2 rounded-lg font-bold text-white hover:bg-wood-500">Dodaj</button>
                            </div>
                        </div>
                        <div id="hero-list" class="grid grid-cols-2 gap-4"></div>
                    `,
                    settings: `
                        <h3 class="text-2xl font-bold mb-6">Ustawienia Globalne</h3>
                        <div class="space-y-6 max-w-2xl">
                             <div class="bg-stone-800 p-6 rounded-xl space-y-4">
                                <h4 class="font-bold text-wood-500 text-xs uppercase">Dane Kontaktowe</h4>
                                <div><label class="text-xs text-stone-500 block mb-1">Email Firmowy</label><input id="set-email" class="calc-input w-full px-3 py-2 rounded"></div>
                                <div><label class="text-xs text-stone-500 block mb-1">Telefon</label><input id="set-phone" class="calc-input w-full px-3 py-2 rounded"></div>
                             </div>
                             <div class="bg-stone-800 p-6 rounded-xl space-y-4">
                                <h4 class="font-bold text-wood-500 text-xs uppercase">Integracje</h4>
                                <div><label class="text-xs text-stone-500 block mb-1">ImgBB API Key (Upload zdjęć)</label><input id="set-imgbb" class="calc-input w-full px-3 py-2 rounded font-mono text-xs"></div>
                             </div>
                             <button onclick="UI.AdminLogic.saveSettings()" class="w-full py-4 bg-green-600 hover:bg-green-500 rounded-xl font-bold shadow-lg">Zapisz Konfigurację</button>
                        </div>
                    `
                    // Inne widoki są generowane dynamicznie w AdminLogic
                }
            }

            static AdminLogic = {
                renderStats: () => {}, // Static content already in template
                
                renderHeroList: () => {
                    const l = document.getElementById('hero-list');
                    l.innerHTML = DataManager.data.heroItems.map((h,i) => `
                        <div class="relative group aspect-video rounded-lg overflow-hidden border border-white/10">
                            <img src="${h.url}" class="w-full h-full object-cover">
                            <button onclick="UI.AdminLogic.delHero(${i})" class="absolute top-2 right-2 bg-red-600 p-2 rounded text-xs opacity-0 group-hover:opacity-100 transition">Usuń</button>
                        </div>
                    `).join('');
                },
                addHero: () => {
                    const u = document.getElementById('new-hero-url').value;
                    if(u) { DataManager.data.heroItems.push({url:u, type:'image'}); DataManager.save(); UI.AdminLogic.renderHeroList(); }
                },
                delHero: (i) => { DataManager.data.heroItems.splice(i,1); DataManager.save(); UI.AdminLogic.renderHeroList(); },
                
                renderSettings: () => {
                    document.getElementById('set-email').value = DataManager.data.config.email || '';
                    document.getElementById('set-phone').value = DataManager.data.config.phone || '';
                    document.getElementById('set-imgbb').value = DataManager.data.config.imgbbKey || '';
                },
                saveSettings: () => {
                    DataManager.data.config = {
                        email: document.getElementById('set-email').value,
                        phone: document.getElementById('set-phone').value,
                        imgbbKey: document.getElementById('set-imgbb').value
                    };
                    DataManager.save();
                },

                // Mock functions for missing tabs to prevent errors in this view
                renderCatList: () => { 
                    const container = document.getElementById('admin-view-container');
                    container.innerHTML = `
                        <h3 class="text-2xl font-bold mb-4">Kategorie (Edytor JSON)</h3>
                        <p class="text-stone-400 text-sm mb-4">Edytuj bezpośrednio strukturę kategorii.</p>
                        <textarea id="json-cats" class="w-full h-96 bg-stone-800 text-stone-300 font-mono text-xs p-4 rounded-xl border border-stone-700 focus:border-wood-500 outline-none">${JSON.stringify(DataManager.data.categories, null, 2)}</textarea>
                        <button onclick="UI.AdminLogic.saveJsonCats()" class="mt-4 bg-wood-600 px-6 py-3 rounded-lg font-bold">Zapisz Strukturę</button>
                    `;
                },
                saveJsonCats: () => {
                    try {
                        const parsed = JSON.parse(document.getElementById('json-cats').value);
                        DataManager.data.categories = parsed;
                        DataManager.save();
                    } catch(e) { alert("Błąd JSON: " + e.message); }
                },

                renderCalc: () => {
                     const container = document.getElementById('admin-view-container');
                     container.innerHTML = `
                        <h3 class="text-2xl font-bold mb-6">Kalkulator Laserowy</h3>
                        <div class="bg-stone-800 p-8 rounded-2xl border border-white/5 grid grid-cols-2 gap-8">
                             <div>
                                <label class="text-xs font-bold text-stone-500 uppercase">Cena Lasera (PLN/min)</label>
                                <input type="number" step="0.1" class="calc-input w-full p-3 rounded mt-2" value="${DataManager.data.calc?.rate || 0.5}" id="cl-rate">
                             </div>
                             <div>
                                <label class="text-xs font-bold text-stone-500 uppercase">Cena Materiału (PLN/cm2)</label>
                                <input type="number" step="0.001" class="calc-input w-full p-3 rounded mt-2" value="${DataManager.data.calc?.mat || 0.003}" id="cl-mat">
                             </div>
                             <button onclick="UI.AdminLogic.saveCalc()" class="col-span-2 bg-wood-600 py-3 rounded font-bold">Zapisz Stawki</button>
                        </div>
                     `;
                },
                saveCalc: () => {
                    DataManager.data.calc = {
                        rate: parseFloat(document.getElementById('cl-rate').value),
                        mat: parseFloat(document.getElementById('cl-mat').value)
                    };
                    DataManager.save();
                }
            };
        }

        /**
         * SYSTEM AUTORYZACJI
         */
        class Auth {
            static openLogin() { document.getElementById('login-screen').classList.remove('hidden'); }
            static closeLogin() { document.getElementById('login-screen').classList.add('hidden'); }
            
            static login() {
                const u = document.getElementById('login-user').value;
                const p = document.getElementById('login-pass').value;
                if(u === 'AdminXeons1308' && p === 'Ktymnyy5') {
                    sessionStorage.setItem('xeomsc_admin', 'true');
                    location.reload();
                } else {
                    document.getElementById('login-error').classList.remove('hidden');
                }
            }
            
            static logout() {
                sessionStorage.removeItem('xeomsc_admin');
                location.reload();
            }

            static async markRead(id) { await updateDoc(doc(DataManager.db, `artifacts/${DataManager.appId}/public/data/messages`, id), {read:true}); }
            static async delMsg(id) { if(confirm("Usunąć?")) await deleteDoc(doc(DataManager.db, `artifacts/${DataManager.appId}/public/data/messages`, id)); }
        }

        /**
         * SYSTEM POWIADOMIEŃ
         */
        class NotificationSystem {
            static show(msg, type='info') {
                const c = document.getElementById('toast-container');
                const el = document.createElement('div');
                const colors = type==='success' ? 'bg-green-600' : (type==='error'?'bg-red-600':'bg-stone-800');
                el.className = `${colors} text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 font-bold text-sm min-w-[300px] toast-enter`;
                el.innerHTML = `<i class="fa-solid fa-${type==='success'?'check':'info-circle'}"></i> ${msg}`;
                
                c.appendChild(el);
                requestAnimationFrame(() => el.classList.remove('toast-enter', 'opacity-0', 'translate-x-full'));
                el.classList.add('toast-enter-active');

                setTimeout(() => {
                    el.classList.remove('toast-enter-active');
                    el.classList.add('toast-exit-active');
                    setTimeout(() => el.remove(), 300);
                }, 4000);
            }
            static success(m) { this.show(m, 'success'); }
            static error(m) { this.show(m, 'error'); }
        }

        // Global Expose for HTML events
        window.UI = UI;
        window.Auth = Auth;
        window.DataManager = DataManager;
        window.NotificationSystem = NotificationSystem;

        // Start
        DataManager.init();
    </script>
</body>
</html>