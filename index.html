<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xeomsc WoodArt - Grawerowanie Laserowe i Drewno</title>
    <!-- Tailwind CSS do stylizacji -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome do ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        wood: {
                            100: '#fef3c7',
                            500: '#d97706',
                            600: '#b45309',
                            800: '#92400e',
                            900: '#78350f',
                        },
                        stone: {
                            50: '#fafaf9',
                            800: '#292524',
                            900: '#1c1917',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            scroll-behavior: smooth;
        }
        .gradient-text {
            background: linear-gradient(to right, #b45309, #d97706);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        .white-outline-text {
            text-shadow: 
                -1px -1px 0 #fff,  
                 1px -1px 0 #fff,
                -1px  1px 0 #fff,
                 1px  1px 0 #fff,
                 0px  0px 8px rgba(255,255,255,0.8);
        }

        .text-outline {
            text-shadow: 
                -1px -1px 2px rgba(0,0,0,0.4),  
                 1px -1px 2px rgba(0,0,0,0.4),
                -1px  1px 2px rgba(0,0,0,0.4),
                 1px  1px 2px rgba(0,0,0,0.4),
                 0px  2px 10px rgba(0,0,0,0.6);
        }

        .hero-bg {
            background-color: #fafaf9;
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d6d3d1' fill-opacity='0.2' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
        }
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .lightbox-img {
            max-height: 85vh;
            max-width: 90vw;
            object-fit: contain;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        
        .admin-controls, .delete-btn {
            display: none !important;
        }
        body.is-admin .admin-controls, 
        body.is-admin .delete-btn {
            display: flex !important;
        }

        .hero-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .hero-slide {
            position: absolute;
            inset: 0;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        .hero-slide.active {
            opacity: 1;
            z-index: 10;
        }
        
        .admin-sidebar-item.active {
            background-color: #b45309;
            color: white;
        }

        #admin-panel.hidden {
            display: none !important;
        }

        .calc-input {
            background: #1c1917;
            border: 1px solid #444;
            color: white;
            padding: 0.5rem;
            border-radius: 0.5rem;
            width: 100%;
            outline: none;
        }
        .calc-input:focus {
            border-color: #d97706;
        }
    </style>
</head>
<body class="text-stone-800 bg-stone-50">

    <!-- EKRAN LOGOWANIA -->
    <div id="login-screen" class="fixed inset-0 z-[300] bg-stone-900 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-8 text-center">
            <div class="mb-6 inline-block p-4 rounded-full bg-wood-100 text-wood-600 text-3xl">
                <i class="fa-solid fa-user-lock"></i>
            </div>
            <h2 class="text-2xl font-bold text-stone-900 mb-2">Panel Administratora</h2>
            <p class="text-gray-500 mb-6">Zaloguj się, aby zarządzać stroną</p>
            
            <form onsubmit="event.preventDefault(); handleLogin();" class="space-y-4 text-left">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Login</label>
                    <input type="text" id="login-user" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-wood-500 outline-none transition" placeholder="Wpisz login">
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">Hasło</label>
                    <input type="password" id="login-pass" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-wood-500 outline-none transition" placeholder="Wpisz hasło">
                </div>
                <div id="login-error" class="text-red-500 text-sm hidden text-center font-bold">Błędny login lub hasło!</div>
                <button type="submit" class="w-full bg-wood-600 text-white py-3 rounded-lg font-bold hover:bg-wood-700 transition shadow-lg">Zaloguj się</button>
            </form>
            <button onclick="exitLogin()" class="mt-6 text-sm text-gray-400 hover:text-wood-600 underline">Wróć do strony głównej</button>
        </div>
    </div>

    <!-- Pasek Admina -->
    <div id="admin-bar" class="hidden bg-stone-900 text-white text-sm py-2 px-4 fixed top-0 w-full z-[150] flex justify-between items-center shadow-md">
        <div class="flex items-center gap-4">
            <span class="hidden sm:inline font-semibold text-green-400"><i class="fa-solid fa-shield-halved mr-2"></i> Tryb Admina</span>
            <button onclick="toggleAdminPanel()" class="bg-wood-600 hover:bg-wood-500 text-white px-4 py-1.5 rounded text-xs font-bold transition flex items-center">
                <i class="fa-solid fa-bars-staggered mr-2"></i> Menu Zarządzania
            </button>
        </div>
        <button onclick="handleLogout()" class="hover:text-red-400 font-bold transition flex items-center"><i class="fa-solid fa-power-off mr-2"></i> Wyloguj</button>
    </div>

    <!-- Nawigacja Strony -->
    <nav class="fixed w-full z-50 bg-white/90 backdrop-blur-md shadow-sm transition-all duration-300 top-0" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex-shrink-0 flex items-center">
                    <a href="#" onclick="goHome(); window.scrollTo(0,0);" class="text-2xl font-bold text-wood-600 tracking-tighter flex items-center">
                        <i class="fa-solid fa-bolt mr-2"></i> Xeomsc WoodArt
                    </a>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="#home" onclick="goHome()" class="text-gray-600 hover:text-wood-600 transition font-medium">Start</a>
                    <a href="#about" onclick="goHome()" class="text-gray-600 hover:text-wood-600 transition font-medium">O ofercie</a>
                    <a href="#portfolio" onclick="goHome()" class="text-gray-600 hover:text-wood-600 transition font-medium">Realizacje</a>
                    <a href="#contact" onclick="goHome()" class="px-5 py-2.5 bg-wood-600 text-white rounded-lg hover:bg-wood-800 transition shadow-lg font-medium">Wycena</a>
                </div>
                <div class="md:hidden flex items-center">
                    <button onclick="toggleMobileMenu()" class="text-gray-600 hover:text-wood-600">
                        <i class="fa-solid fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobilne Menu -->
        <div class="md:hidden hidden bg-white border-t border-stone-100" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="#home" onclick="goHome(); toggleMobileMenu();" class="block px-3 py-2 rounded-md text-gray-700 hover:bg-stone-50">Start</a>
                <a href="#about" onclick="goHome(); toggleMobileMenu();" class="block px-3 py-2 rounded-md text-gray-700 hover:bg-stone-50">O ofercie</a>
                <a href="#portfolio" onclick="goHome(); toggleMobileMenu();" class="block px-3 py-2 rounded-md text-gray-700 hover:bg-stone-50">Realizacje</a>
                <a href="#contact" onclick="goHome(); toggleMobileMenu();" class="block px-3 py-2 rounded-md font-bold text-wood-600">Wycena</a>
            </div>
        </div>
    </nav>

    <!-- KONTENER GŁÓWNY -->
    <div id="main-content" class="pt-0 transition-all duration-300">
        <!-- Hero Section -->
        <section id="home" class="relative h-screen flex items-center hero-bg overflow-hidden">
            <div class="absolute inset-0 z-0" id="hero-carousel-container">
                <div class="w-full h-full bg-stone-200 animate-pulse"></div>
            </div>
            <div class="absolute inset-0 bg-black/20 z-10 pointer-events-none"></div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-20 w-full">
                <div class="w-full md:w-1/2 text-center md:text-left bg-white/20 md:bg-transparent backdrop-blur-sm md:backdrop-blur-none p-8 md:p-0 rounded-3xl">
                    <span class="inline-block py-1.5 px-4 rounded-full bg-wood-100/90 text-wood-800 text-xs font-bold mb-6 border border-wood-200 uppercase tracking-widest shadow-sm">
                        Pracownia Grawerska
                    </span>
                    <h1 class="text-4xl md:text-6xl font-bold leading-tight mb-6 text-white text-outline">
                        Precyzja Lasera,<br>
                        Ciepło <span class="gradient-text white-outline-text">Drewna</span>.
                    </h1>
                    <p class="text-lg md:text-xl text-white mb-8 max-w-lg mx-auto md:mx-0 font-medium text-outline">
                        Witaj w Xeomsc WoodArt. Tworzymy spersonalizowane dekoracje, pamiątki oraz gadżety reklamowe z duszą.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                        <a href="#portfolio" class="px-8 py-3.5 bg-wood-600 text-white rounded-xl hover:bg-wood-800 transition shadow-xl font-bold text-center">Zobacz nasze prace</a>
                        <a href="#contact" class="px-8 py-3.5 bg-white/90 backdrop-blur-md text-wood-600 border border-white/50 rounded-xl hover:bg-white transition shadow-xl font-bold text-center">Wycena projektu</a>
                    </div>
                </div>
            </div>
            <div class="absolute inset-x-0 bottom-0 h-32 bg-gradient-to-t from-stone-50 to-transparent z-10 pointer-events-none"></div>
        </section>

        <!-- Oferta -->
        <section id="about" class="py-24 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-4xl font-bold mb-4 text-stone-900">Co oferuję?</h2>
                <div class="w-24 h-1.5 bg-wood-600 mx-auto rounded-full mb-16"></div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                    <div class="p-10 bg-stone-50 rounded-3xl border border-stone-100 hover:shadow-xl transition-shadow group">
                        <div class="w-16 h-16 bg-wood-100 text-wood-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-wood-600 group-hover:text-white transition-colors">
                            <i class="fa-solid fa-wand-magic-sparkles text-3xl"></i>
                        </div>
                        <h3 class="font-bold text-2xl mb-4">Grawerowanie</h3>
                        <p class="text-gray-600">Niezwykle precyzyjne nanoszenie detali na drewno, szkło i inne materiały.</p>
                    </div>
                    <div class="p-10 bg-stone-50 rounded-3xl border border-stone-100 hover:shadow-xl transition-shadow group">
                        <div class="w-16 h-16 bg-wood-100 text-wood-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-wood-600 group-hover:text-white transition-colors">
                            <i class="fa-solid fa-scissors text-3xl"></i>
                        </div>
                        <h3 class="font-bold text-2xl mb-4">Precyzyjne Cięcie</h3>
                        <p class="text-gray-600">Wycinanie skomplikowanych kształtów, liter i elementów dekoracyjnych.</p>
                    </div>
                    <div class="p-10 bg-stone-50 rounded-3xl border border-stone-100 hover:shadow-xl transition-shadow group">
                        <div class="w-16 h-16 bg-wood-100 text-wood-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-wood-600 group-hover:text-white transition-colors">
                            <i class="fa-solid fa-gift text-3xl"></i>
                        </div>
                        <h3 class="font-bold text-2xl mb-4">Unikalne Prezenty</h3>
                        <p class="text-gray-600">Pamiątki na każdą okazję: śluby, chrzciny, jubileusze i wiele innych.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Realizacje -->
        <section id="portfolio" class="py-24 bg-stone-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-4xl font-bold mb-4 text-stone-900">Moje Realizacje</h2>
                <div class="w-24 h-1.5 bg-wood-600 mx-auto rounded-full mb-16"></div>
                <div id="main-categories-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 text-left"></div>
            </div>
        </section>

        <!-- Kontakt -->
        <section id="contact" class="py-24 bg-white border-t border-stone-100">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                 <h2 class="text-4xl font-bold mb-8">Kontakt i Wycena</h2>
                 <p class="mb-12 text-gray-600 text-lg">Masz pomysł na projekt? Napisz do mnie, a pomogę Ci go zrealizować i przygotuję indywidualną wycenę.</p>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="flex flex-col items-center p-8 bg-stone-50 rounded-2xl border border-stone-100">
                        <i class="fa-solid fa-envelope text-wood-600 text-3xl mb-4"></i>
                        <span class="font-bold text-xl">pkatlowski@gmail.com</span>
                    </div>
                    <div class="flex flex-col items-center p-8 bg-stone-50 rounded-2xl border border-stone-100">
                        <i class="fa-solid fa-phone text-wood-600 text-3xl mb-4"></i>
                        <span class="font-bold text-xl">+48 123 456 789</span>
                    </div>
                 </div>
            </div>
        </section>
    </div>

    <!-- WIDOKI DYNAMICZNE -->
    <div id="subcategory-view" class="hidden min-h-screen bg-white pt-32 pb-20 fade-in">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <button onclick="goHome()" class="mb-8 flex items-center text-wood-600 font-bold hover:translate-x-[-5px] transition-transform"><i class="fa-solid fa-arrow-left mr-2"></i> Powrót do głównych kategorii</button>
            <h2 id="subcategory-title" class="text-4xl font-bold text-stone-900 mb-4">Wybierz produkt</h2>
            <div id="subcategory-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"></div>
        </div>
    </div>

    <div id="gallery-view" class="hidden min-h-screen bg-white pt-32 pb-20 fade-in">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <button id="back-to-sub-btn" class="mb-8 flex items-center text-wood-600 font-bold hover:translate-x-[-5px] transition-transform"><i class="fa-solid fa-arrow-left mr-2"></i> Powrót do listy produktów</button>
            <div class="mb-10">
                <h2 id="gallery-title" class="text-4xl font-bold text-stone-900 mb-2">Galeria Zdjęć</h2>
                <div id="gallery-product-info" class="text-stone-500 text-lg"></div>
            </div>
            <div id="gallery-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
        </div>
    </div>

    <!-- LIGHTBOX -->
    <div id="lightbox" class="fixed inset-0 z-[1000] bg-black/95 hidden flex items-center justify-center p-4 transition-opacity duration-300 opacity-0 cursor-pointer" onclick="closeLightbox()">
        <div class="lightbox-nav lightbox-prev" onclick="event.stopPropagation(); changeLightboxImage(-1)"><i class="fa-solid fa-chevron-left"></i></div>
        <div class="lightbox-nav lightbox-next" onclick="event.stopPropagation(); changeLightboxImage(1)"><i class="fa-solid fa-chevron-right"></i></div>
        <div class="relative max-w-5xl max-h-screen w-full flex flex-col items-center justify-center" onclick="event.stopPropagation()">
            <img id="lightbox-img" src="" alt="Powiększenie" class="lightbox-img rounded-lg">
            <p id="lightbox-desc" class="text-white mt-4 text-xl font-medium text-center bg-black/50 px-6 py-2 rounded-full"></p>
            <button class="absolute -top-12 right-0 text-white hover:text-wood-500" onclick="closeLightbox()"><i class="fa-solid fa-xmark text-4xl"></i></button>
        </div>
    </div>

    <!-- PANEL ADMINISTRATORA -->
    <div id="admin-panel" class="fixed inset-0 z-[2000] bg-black/40 backdrop-blur-sm hidden items-center justify-center p-4 sm:p-10">
        <div class="bg-stone-900 text-white w-full max-w-6xl h-full max-h-[90vh] rounded-3xl overflow-hidden flex flex-col sm:flex-row shadow-2xl border border-white/10">
            <!-- Sidebar -->
            <div class="w-full sm:w-64 bg-stone-950 border-r border-white/5 p-6 flex flex-col">
                <h2 class="text-xl font-bold mb-10 text-wood-500 flex items-center gap-2 uppercase tracking-widest">
                    <i class="fa-solid fa-gears"></i> Zarządzanie
                </h2>
                <nav class="space-y-2 flex-1">
                    <button onclick="switchAdminView('hero-gallery')" id="btn-hero-gallery" class="admin-sidebar-item w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 transition flex items-center gap-3">
                        <i class="fa-solid fa-images"></i> Galeria Tytułowa
                    </button>
                    <button onclick="switchAdminView('categories')" id="btn-categories" class="admin-sidebar-item w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 transition flex items-center gap-3">
                        <i class="fa-solid fa-folder-tree"></i> Kategorie
                    </button>
                    <button onclick="switchAdminView('products')" id="btn-products" class="admin-sidebar-item w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 transition flex items-center gap-3">
                        <i class="fa-solid fa-box-open"></i> Produkty i Zdjęcia
                    </button>
                    <!-- Kalkulator Lasera Button -->
                    <button onclick="switchAdminView('calculator')" id="btn-calculator" class="admin-sidebar-item w-full text-left px-4 py-3 rounded-xl hover:bg-white/5 transition flex items-center gap-3">
                        <i class="fa-solid fa-calculator"></i> Kalkulator Lasera
                    </button>
                </nav>
                <button onclick="toggleAdminPanel()" class="mt-auto pt-4 text-stone-500 hover:text-white transition flex items-center gap-2 text-sm border-t border-white/10">
                    <i class="fa-solid fa-xmark"></i> Zamknij Panel
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto p-6 sm:p-10 bg-stone-900 text-white">
                
                <!-- Widok: Kalkulator Lasera -->
                <div id="view-calculator" class="admin-view hidden space-y-8">
                    <header>
                        <h3 class="text-3xl font-bold mb-2">Kalkulator Lasera</h3>
                        <p class="text-stone-400">Obliczenia na podstawie Szerokości, Wysokości i Czasu pracy.</p>
                    </header>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Parametry Wejściowe -->
                        <div class="bg-stone-800 p-6 rounded-2xl border border-white/5 space-y-6">
                            <h4 class="font-bold text-wood-500 uppercase text-xs border-b border-white/5 pb-2">Ustawienia i Koszty</h4>
                            
                            <!-- Sekcja Wymiarów -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-[10px] text-stone-400 uppercase font-bold mb-1">Szerokość (mm)</label>
                                    <input type="number" id="calc-width-mm" class="calc-input" value="100" oninput="runLaserCalculator()">
                                </div>
                                <div>
                                    <label class="block text-[10px] text-stone-400 uppercase font-bold mb-1">Wysokość (mm)</label>
                                    <input type="number" id="calc-height-mm" class="calc-input" value="100" oninput="runLaserCalculator()">
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4 pt-4 border-t border-white/5">
                                <div>
                                    <label class="block text-[10px] text-stone-400 uppercase font-bold mb-1">Czas Lasera (min)</label>
                                    <input type="number" id="calc-time-laser" class="calc-input" value="10" oninput="runLaserCalculator()">
                                </div>
                                <div>
                                    <label class="block text-[10px] text-stone-400 uppercase font-bold mb-1">Pole (cm²)</label>
                                    <input type="text" id="calc-area-cm2" class="calc-input bg-stone-950 opacity-60" readonly value="100">
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4 pt-4 border-t border-white/5">
                                <div>
                                    <label class="block text-[10px] text-stone-400 uppercase font-bold mb-1">Koszt Lasera (PLN/min)</label>
                                    <input type="number" step="0.01" id="calc-rate-laser-min" class="calc-input" value="0.50" oninput="runLaserCalculator()">
                                </div>
                                <div>
                                    <label class="block text-[10px] text-stone-400 uppercase font-bold mb-1">Koszt Materiału (PLN/cm²)</label>
                                    <input type="number" step="0.0001" id="calc-rate-cm2" class="calc-input" value="0.0038" oninput="runLaserCalculator()">
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4 pt-4 border-t border-white/5">
                                <div>
                                    <label class="block text-[10px] text-stone-400 uppercase font-bold mb-1">Marża (%)</label>
                                    <input type="number" id="calc-margin" class="calc-input" value="20" oninput="runLaserCalculator()">
                                </div>
                                <div>
                                    <label class="block text-[10px] text-stone-400 uppercase font-bold mb-1">Koszty Stałe (%)</label>
                                    <input type="number" id="calc-overhead" class="calc-input" value="10" oninput="runLaserCalculator()">
                                </div>
                            </div>
                        </div>

                        <!-- Wyniki Kalkulacji -->
                        <div class="bg-stone-950 p-8 rounded-2xl border-2 border-wood-600/30 flex flex-col justify-center items-center text-center space-y-6 text-white">
                            <div class="grid grid-cols-2 gap-4 w-full">
                                <div>
                                    <p class="text-stone-500 uppercase text-[9px] font-bold tracking-widest mb-1">Koszt Materiału</p>
                                    <div id="calc-result-material" class="text-xl font-bold">0.00 PLN</div>
                                </div>
                                <div>
                                    <p class="text-stone-500 uppercase text-[9px] font-bold tracking-widest mb-1">Koszt Lasera</p>
                                    <div id="calc-result-laser" class="text-xl font-bold">0.00 PLN</div>
                                </div>
                            </div>

                            <div class="w-full h-px bg-white/5"></div>

                            <div>
                                <p class="text-stone-500 uppercase text-xs font-bold tracking-widest mb-2">Całkowity Koszt Produkcji</p>
                                <div id="calc-result-total-cost" class="text-3xl font-bold">0.00 PLN</div>
                            </div>

                            <div>
                                <p class="text-wood-500 uppercase text-sm font-black tracking-widest mb-2">Sugerowana Cena Klienta</p>
                                <div id="calc-result-final-price" class="text-6xl font-black drop-shadow-lg text-white">0.00 PLN</div>
                            </div>
                            
                            <button onclick="saveCalcSettings()" class="bg-stone-800 hover:bg-stone-700 text-white px-6 py-2 rounded-lg text-xs font-bold transition">Zapisz ustawienia stawek</button>
                        </div>
                    </div>
                </div>

                <div id="view-hero-gallery" class="admin-view hidden space-y-8">
                    <header><h3 class="text-3xl font-bold mb-2">Galeria Tytułowa</h3></header>
                    <div class="bg-stone-800 p-6 rounded-2xl border border-white/5">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <select id="admin-hero-type" class="w-full bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white"><option value="image">Zdjęcie</option><option value="video">Wideo</option></select>
                            <input id="admin-hero-url" type="text" class="w-full bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Link URL">
                        </div>
                        <button onclick="adminAddHeroItem()" class="mt-6 bg-wood-600 hover:bg-wood-700 text-white font-bold py-3 px-8 rounded-xl transition w-full text-white">Dodaj</button>
                    </div>
                    <div id="hero-items-list" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></div>
                </div>

                <div id="view-categories" class="admin-view hidden space-y-8 text-white">
                    <header><h3 class="text-3xl font-bold mb-2">Kategorie</h3></header>
                    <div class="bg-stone-800 p-6 rounded-2xl border border-white/5" id="admin-cat-form-container">
                        <form onsubmit="event.preventDefault(); adminSaveCategory();" class="space-y-4">
                            <input type="hidden" id="admin-cat-edit-id">
                            <input id="admin-main-cat-title" type="text" class="w-full bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Nazwa kategorii" required>
                            <input id="admin-main-cat-desc" type="text" class="w-full bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Opis" required>
                            <input id="admin-main-cat-image" type="text" class="w-full bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Zdjęcie okładki (link)">
                            <div class="flex gap-2 text-white">
                                <button type="submit" id="cat-save-btn" class="bg-wood-600 px-8 py-3 rounded-xl font-bold flex-1">Zapisz</button>
                                <button type="button" id="cat-cancel-btn" onclick="resetCatForm()" class="hidden bg-stone-700 px-4 py-3 rounded-xl font-bold">Anuluj</button>
                            </div>
                        </form>
                    </div>
                    <div id="admin-categories-list" class="grid grid-cols-1 gap-3"></div>
                </div>

                <div id="view-products" class="admin-view hidden space-y-10 text-white">
                    <header><h3 class="text-3xl font-bold mb-2">Produkty</h3></header>
                    <div class="bg-stone-800 p-6 rounded-2xl border border-white/5 space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <select id="admin-main-cat-select" class="bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white"></select>
                            <input id="admin-sub-title" type="text" class="bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Nazwa produktu">
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <input id="admin-sub-price" type="text" class="bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Cena">
                            <input id="admin-sub-img" type="text" class="bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Link okładki">
                        </div>
                        <textarea id="admin-sub-desc" rows="3" class="w-full bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Opis..."></textarea>
                        <button onclick="adminAddSubcategory()" class="bg-wood-600 px-8 py-3 rounded-xl font-bold w-full">Dodaj produkt</button>
                    </div>
                    <div class="bg-stone-800 p-6 rounded-2xl border border-white/5 space-y-6">
                        <select id="admin-sub-cat-select" class="w-full bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white"></select>
                        <input id="admin-img-url" type="text" class="bg-stone-950 border border-white/10 rounded-lg px-4 py-3 text-white" placeholder="Dodaj zdjęcie do galerii produktu (link)">
                        <button onclick="adminAddImage()" class="bg-stone-600 px-8 py-3 rounded-xl font-bold w-full">Dodaj do galerii</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <footer class="bg-stone-950 text-stone-500 py-16 text-center text-sm border-t border-white/5">
        <div class="max-w-7xl mx-auto px-4 space-y-6">
            <h2 class="text-xl font-bold text-wood-600 italic">Xeomsc WoodArt</h2>
            <p>&copy; 2024 Wszystkie prawa zastrzeżone. <button id="admin-footer-btn" onclick="toggleAdminPanel()" class="hidden hover:text-white underline ml-2">Panel Zarządzania</button></p>
        </div>
    </footer>

    <script>
        // --- DANE ---
        const defaultData = {
            heroItems: [{ id: 1, type: 'image', url: 'https://images.unsplash.com/photo-1542332213-31f87348057f?q=80&w=2070&auto=format&fit=crop' }],
            categories: {},
            galleries: {},
            calcSettings: { rateLaserMin: 0.50, rateCm2: 0.0038, overhead: 10, margin: 20 }
        };

        let siteData = JSON.parse(localStorage.getItem('xeomsc_data')) || defaultData;
        
        // --- KARUZELA HERO ---
        let currentHeroIdx = 0, heroTimer = null;
        function renderHeroCarousel() {
            const container = document.getElementById('hero-carousel-container');
            if (!container || siteData.heroItems.length === 0) return;
            container.innerHTML = '';
            siteData.heroItems.forEach((item, idx) => {
                const slide = document.createElement('div');
                slide.className = `hero-slide ${idx === currentHeroIdx ? 'active' : ''}`;
                slide.innerHTML = item.type === 'image' ? `<img src="${item.url}" class="w-full h-full object-cover">` : `<video src="${item.url}" class="w-full h-full object-cover" ${idx === currentHeroIdx ? 'autoplay' : ''} muted></video>`;
                container.appendChild(slide);
            });
            startHeroRotation();
        }
        function startHeroRotation() {
            clearTimeout(heroTimer);
            heroTimer = setTimeout(nextHeroSlide, 5000);
        }
        function nextHeroSlide() {
            if (siteData.heroItems.length === 0) return;
            currentHeroIdx = (currentHeroIdx + 1) % siteData.heroItems.length;
            const slides = document.querySelectorAll('.hero-slide');
            slides.forEach((s, idx) => s.classList.toggle('active', idx === currentHeroIdx));
            startHeroRotation();
        }

        // --- ADMIN I DANE ---
        function saveData() { localStorage.setItem('xeomsc_data', JSON.stringify(siteData)); renderMainCategories(); }
        
        function switchAdminView(viewId) {
            document.querySelectorAll('.admin-view').forEach(v => v.classList.add('hidden'));
            document.querySelectorAll('.admin-sidebar-item').forEach(b => b.classList.remove('active'));
            document.getElementById(`view-${viewId}`).classList.remove('hidden');
            document.getElementById(`btn-${viewId}`).classList.add('active');
            if (viewId === 'calculator') initCalculator();
            if (viewId === 'categories') renderCategoriesAdminList();
            if (viewId === 'hero-gallery') renderHeroAdminList();
        }

        function initCalculator() {
            const s = siteData.calcSettings;
            document.getElementById('calc-rate-laser-min').value = s.rateLaserMin;
            document.getElementById('calc-rate-cm2').value = s.rateCm2;
            document.getElementById('calc-overhead').value = s.overhead;
            document.getElementById('calc-margin').value = s.margin;
            runLaserCalculator();
        }

        function runLaserCalculator() {
            const w = parseFloat(document.getElementById('calc-width-mm').value) || 0;
            const h = parseFloat(document.getElementById('calc-height-mm').value) || 0;
            const t = parseFloat(document.getElementById('calc-time-laser').value) || 0;
            const rl = parseFloat(document.getElementById('calc-rate-laser-min').value) || 0;
            const rc = parseFloat(document.getElementById('calc-rate-cm2').value) || 0;
            const oh = parseFloat(document.getElementById('calc-overhead').value) || 0;
            const ma = parseFloat(document.getElementById('calc-margin').value) || 0;

            const area = (w * h) / 100;
            document.getElementById('calc-area-cm2').value = area.toFixed(2);
            const costM = area * rc;
            const costL = t * rl;
            const baseCost = costM + costL;
            const totalC = baseCost * (1 + oh / 100);
            const finalP = totalC * (1 + ma / 100);

            document.getElementById('calc-result-material').textContent = costM.toFixed(4) + " PLN";
            document.getElementById('calc-result-laser').textContent = costL.toFixed(2) + " PLN";
            document.getElementById('calc-result-total-cost').textContent = totalC.toFixed(2) + " PLN";
            document.getElementById('calc-result-final-price').textContent = finalP.toFixed(2) + " PLN";
        }

        function saveCalcSettings() {
            siteData.calcSettings = {
                rateLaserMin: parseFloat(document.getElementById('calc-rate-laser-min').value),
                rateCm2: parseFloat(document.getElementById('calc-rate-cm2').value),
                overhead: parseFloat(document.getElementById('calc-overhead').value),
                margin: parseFloat(document.getElementById('calc-margin').value)
            };
            saveData(); alert("Stawki zostały zapisane.");
        }

        // --- AUTH I START ---
        function checkAuth() {
            if (sessionStorage.getItem('xeomsc_admin') === 'true') {
                document.body.classList.add('is-admin');
                document.getElementById('admin-bar').classList.remove('hidden');
                document.getElementById('admin-footer-btn').classList.remove('hidden');
            } else if (location.hash === '#admin') {
                document.getElementById('login-screen').classList.remove('hidden');
            }
        }
        function handleLogin() {
            if (document.getElementById('login-user').value === 'admin' && document.getElementById('login-pass').value === '12345') {
                sessionStorage.setItem('xeomsc_admin', 'true');
                location.reload();
            } else { document.getElementById('login-error').classList.remove('hidden'); }
        }
        function handleLogout() { sessionStorage.removeItem('xeomsc_admin'); location.reload(); }
        function toggleAdminPanel() { 
            const p = document.getElementById('admin-panel');
            p.classList.toggle('hidden');
            p.style.display = p.classList.contains('hidden') ? 'none' : 'flex';
            if(!p.classList.contains('hidden')) switchAdminView('hero-gallery');
            refreshAdminUI();
        }
        function exitLogin() { location.hash = ''; location.reload(); }
        function goHome() { 
            document.querySelectorAll('#subcategory-view, #gallery-view').forEach(v => v.classList.add('hidden'));
            document.getElementById('main-content').classList.remove('hidden');
        }

        // --- ZARZĄDZANIE TREŚCIĄ ---
        function renderMainCategories() {
            const grid = document.getElementById('main-categories-grid');
            if(!grid) return; grid.innerHTML = '';
            Object.keys(siteData.categories).forEach(k => {
                const cat = siteData.categories[k];
                const div = document.createElement('div');
                div.className = "bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-2xl transition cursor-pointer border border-stone-100";
                div.onclick = () => openSubcategories(k);
                div.innerHTML = `<div class="h-64 overflow-hidden"><img src="${cat.image || 'https://via.placeholder.com/400'}" class="w-full h-full object-cover"></div><div class="p-6"><h3 class="font-bold text-xl">${cat.title}</h3><p class="text-stone-500 text-sm">${cat.desc}</p></div>`;
                grid.appendChild(div);
            });
        }
        function openSubcategories(id) {
            const cat = siteData.categories[id];
            document.getElementById('subcategory-title').textContent = cat.title;
            const g = document.getElementById('subcategory-grid'); g.innerHTML = '';
            cat.subcategories.forEach((s, idx) => {
                const div = document.createElement('div');
                div.className = "bg-white rounded-2xl overflow-hidden border border-stone-100 group cursor-pointer hover:shadow-lg transition";
                div.onclick = () => openGallery(s.id, s.title, id, s.desc, s.price);
                div.innerHTML = `<div class="h-48 overflow-hidden"><img src="${s.image}" class="w-full h-full object-cover group-hover:scale-105 transition"></div><div class="p-4 flex justify-between items-center"><h4 class="font-bold">${s.title}</h4><button onclick="event.stopPropagation(); deleteSub('${id}',${idx})" class="admin-controls text-red-500"><i class="fa-solid fa-trash"></i></button></div>`;
                g.appendChild(div);
            });
            document.getElementById('main-content').classList.add('hidden');
            document.getElementById('subcategory-view').classList.remove('hidden');
        }
        function openGallery(subId, title, catId, desc, price) {
            const gal = siteData.galleries[subId] || { images: [] };
            document.getElementById('gallery-title').textContent = title;
            document.getElementById('gallery-product-info').textContent = (price ? price + " | " : "") + (desc || "");
            document.getElementById('back-to-sub-btn').onclick = () => openSubcategories(catId);
            const g = document.getElementById('gallery-grid'); g.innerHTML = '';
            gal.images.forEach((img, idx) => {
                const div = document.createElement('div');
                div.className = "relative aspect-square rounded-xl overflow-hidden cursor-pointer shadow-md group";
                div.onclick = () => openLightbox(idx, gal.images);
                div.innerHTML = `<img src="${img.src}" class="w-full h-full object-cover"><button onclick="event.stopPropagation(); deleteImg('${subId}',${idx},'${catId}','${title}','${desc}','${price}')" class="admin-controls absolute top-2 right-2 bg-red-500 text-white p-2 rounded-lg opacity-0 group-hover:opacity-100"><i class="fa-solid fa-trash"></i></button>`;
                g.appendChild(div);
            });
            document.getElementById('subcategory-view').classList.add('hidden');
            document.getElementById('gallery-view').classList.remove('hidden');
        }

        // --- FUNKCJE POMOCNICZE ADMINA ---
        function renderHeroAdminList() {
            const list = document.getElementById('hero-items-list'); list.innerHTML = '';
            siteData.heroItems.forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = "flex items-center gap-4 bg-stone-900 border border-white/10 p-4 rounded-xl";
                div.innerHTML = `<div class="w-16 h-10 bg-black rounded-lg overflow-hidden flex-shrink-0 text-white">${item.type === 'image' ? `<img src="${item.url}" class="w-full h-full object-cover">` : `<i class="fa-solid fa-video p-3"></i>`}</div><div class="flex-1 truncate text-xs text-stone-500">${item.url}</div><button onclick="adminRemoveHeroItem(${idx})" class="text-red-500 p-2"><i class="fa-solid fa-trash"></i></button>`;
                list.appendChild(div);
            });
        }
        function adminAddHeroItem() { const u = document.getElementById('admin-hero-url').value, t = document.getElementById('admin-hero-type').value; if(u) siteData.heroItems.push({id: Date.now(), type: t, url: u}); saveData(); renderHeroAdminList(); renderHeroCarousel(); }
        function adminRemoveHeroItem(i) { siteData.heroItems.splice(i,1); saveData(); renderHeroAdminList(); renderHeroCarousel(); }

        function renderCategoriesAdminList() {
            const list = document.getElementById('admin-categories-list'); list.innerHTML = '';
            Object.keys(siteData.categories).forEach(k => {
                const c = siteData.categories[k];
                const div = document.createElement('div');
                div.className = "flex items-center justify-between bg-stone-950 p-4 rounded-xl border border-white/5";
                div.innerHTML = `<div><h5 class="font-bold">${c.title}</h5><p class="text-xs text-stone-500">${k}</p></div><div class="flex gap-2"><button onclick="adminEditCategory('${k}')" class="text-blue-400"><i class="fa-solid fa-pen"></i></button><button onclick="adminDeleteCategory('${k}')" class="text-red-500"><i class="fa-solid fa-trash"></i></button></div>`;
                list.appendChild(div);
            });
        }
        function adminEditCategory(k) { const c = siteData.categories[k]; document.getElementById('admin-cat-edit-id').value = k; document.getElementById('admin-main-cat-title').value = c.title; document.getElementById('admin-main-cat-desc').value = c.desc; document.getElementById('admin-main-cat-image').value = c.image; document.getElementById('cat-save-btn').textContent = "Zaktualizuj"; document.getElementById('cat-cancel-btn').classList.remove('hidden'); }
        function adminDeleteCategory(k) { if(confirm("Usunąć kategorię?")) { delete siteData.categories[k]; saveData(); renderCategoriesAdminList(); } }

        function adminSaveCategory() {
            const id = document.getElementById('admin-cat-edit-id').value || 'cat-'+Date.now();
            siteData.categories[id] = { 
                title: document.getElementById('admin-main-cat-title').value,
                desc: document.getElementById('admin-main-cat-desc').value,
                image: document.getElementById('admin-main-cat-image').value,
                subcategories: siteData.categories[id] ? siteData.categories[id].subcategories : []
            };
            saveData(); resetCatForm(); renderCategoriesAdminList();
        }
        function adminAddSubcategory() {
            const cid = document.getElementById('admin-main-cat-select').value;
            if(!cid) return;
            const sid = 'sub-'+Date.now();
            siteData.categories[cid].subcategories.push({
                id: sid,
                title: document.getElementById('admin-sub-title').value,
                image: document.getElementById('admin-sub-img').value,
                desc: document.getElementById('admin-sub-desc').value,
                price: document.getElementById('admin-sub-price').value
            });
            siteData.galleries[sid] = { images: [] };
            saveData(); refreshAdminUI();
        }
        function adminAddImage() {
            const sid = document.getElementById('admin-sub-cat-select').value;
            if(!sid) return;
            siteData.galleries[sid].images.push({ src: document.getElementById('admin-img-url').value });
            saveData();
        }
        function deleteSub(cid, idx) { if(confirm("Usunąć?")) { siteData.categories[cid].subcategories.splice(idx,1); saveData(); openSubcategories(cid); } }
        function deleteImg(sid, idx, cid, t, d, p) { if(confirm("Usunąć?")) { siteData.galleries[sid].images.splice(idx,1); saveData(); openGallery(sid,t,cid,d,p); } }
        function refreshAdminUI() {
            const m = document.getElementById('admin-main-cat-select'), s = document.getElementById('admin-sub-cat-select');
            m.innerHTML = '<option value="">Wybierz kategorię</option>';
            s.innerHTML = '<option value="">Wybierz produkt</option>';
            Object.keys(siteData.categories).forEach(k => {
                m.innerHTML += `<option value="${k}">${siteData.categories[k].title}</option>`;
                siteData.categories[k].subcategories.forEach(sub => s.innerHTML += `<option value="${sub.id}">${siteData.categories[k].title} > ${sub.title}</option>`);
            });
        }
        function resetCatForm() { document.getElementById('admin-cat-edit-id').value = ""; document.getElementById('cat-save-btn').textContent = "Zapisz"; document.getElementById('cat-cancel-btn').classList.add('hidden'); document.getElementById('admin-main-cat-title').value = ""; document.getElementById('admin-main-cat-desc').value = ""; document.getElementById('admin-main-cat-image').value = ""; }

        // LIGHTBOX
        let cGal = [], cIdx = 0;
        function openLightbox(i, g) { cGal = g; cIdx = i; const lb = document.getElementById('lightbox'); document.getElementById('lightbox-img').src = g[i].src; lb.classList.replace('hidden','flex'); setTimeout(()=>lb.classList.replace('opacity-0','opacity-100'),10); }
        function closeLightbox() { const lb = document.getElementById('lightbox'); lb.classList.replace('opacity-100','opacity-0'); setTimeout(()=>lb.classList.replace('flex','hidden'),300); }
        function changeLightboxImage(d) { cIdx = (cIdx + d + cGal.length) % cGal.length; document.getElementById('lightbox-img').src = cGal[cIdx].src; }

        window.onload = () => { checkAuth(); renderMainCategories(); renderHeroCarousel(); };
    </script>
</body>
</html>